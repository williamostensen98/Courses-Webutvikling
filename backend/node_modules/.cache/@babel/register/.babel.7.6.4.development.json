{
  "{\"sourceRoot\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend\",\"filename\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/server.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend\",\"plugins\":[{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\"./src\"]}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"corejs2-usage\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null],\"exit\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"corejs\":{\"options\":{\"loose\":false,\"includePrerelease\":false},\"loose\":false,\"raw\":\"2.0.0\",\"major\":2,\"minor\":0,\"patch\":0,\"prerelease\":[],\"build\":[],\"version\":\"2.0.0\"},\"polyfillTargets\":{\"node\":\"10.15.3\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"regenerator\":false,\"debug\":false}}],\"presets\":[]}:7.6.4": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend",
      "filename": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/server.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "./src"
            ]
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "corejs2-usage",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "Program": {
              "enter": [
                null
              ]
            },
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "YieldExpression": {
              "enter": [
                null
              ]
            },
            "MemberExpression": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "VariableDeclarator": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true,
            "Identifier": {
              "enter": [
                null
              ]
            },
            "JSXIdentifier": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "corejs": {
              "options": {
                "loose": false,
                "includePrerelease": false
              },
              "loose": false,
              "raw": "2.0.0",
              "major": 2,
              "minor": 0,
              "patch": 0,
              "prerelease": [],
              "build": [],
              "version": "2.0.0"
            },
            "polyfillTargets": {
              "node": "10.15.3"
            },
            "include": {},
            "exclude": {},
            "proposals": false,
            "shippedProposals": false,
            "regenerator": false,
            "debug": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/server.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/server.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend",
        "sourceFileName": "server.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _course = _interopRequireDefault(require(\"./routes/course\"));\n\nvar _grades = _interopRequireDefault(require(\"./routes/grades\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Babel is added as a dependency in package.json and used to type modern .js syntax and then transpiled. \n// import express from 'express' is equal to const express = require('express')\nconst API_PORT = 3001; // Listening for incoming HTTP requests on port 3001\n\nconst app = (0, _express.default)(); // Creating an express-object\n// When calling app.use(), we add another \"filter\" for all requests to go through. E.g., app.use(bodyParser.json()) parses incoming requests to JSON-format.\n// The bodyparser makes incoming request body data to form the data to be available the way we want to.\n\napp.use(_bodyParser.default.json());\napp.use((0, _cors.default)()); // All requests to adress.com/courses is handled by the logic inside courseRoutes, which is imported from /routes/course.\n\napp.use('/courses', _course.default); // Same goes for adress.com/courses/:course_code/grades. The reason for this not being handled inside courseRoutes is that our DB have to separate collections\n// One collection for all the courses, and one collection for all the grades for all semesters for all courses. Due to huge amount of data we decided to not embed the grades\n// collection within the courses collection, as this would make the data less transparent and make the JSON for just one course object very long.\n\napp.use('/courses/:course_code/grades', _grades.default); // Cross-Origin Resource Sharing (CORS). Used to specify what type of requests is allowed, who may send requests and what header-types. \n// CORS works by adding new HTTP headers that let servers describe which origins are permitted to read information from a web browser.\n\napp.use(function (req, res, next) {\n  res.header(\"Access-Control-Allow-Origin\", \"*\"); // * indicates that anyone can connect. Can be changed to specific IPs.\n\n  res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\"); // Which headers we allow\n\n  res.header('Access-Control-Allow-Methods', 'GET, PUT'); // Defining all type of requests we want to accept. We only allow GET and PUT. \n\n  next();\n}); // Listening for requests on port API_PORT, and logging to console when backend-server is running.\n\napp.listen(API_PORT, () => console.log(`LISTENING ON PORT ${API_PORT}`)); // Adress to MongoDB. On format: mongodb://<username>:<pwd>@<IP>/<DNS>:<port>/<database>\n\nconst dbRoute = 'mongodb://victojo:admin@it2810-39.idi.ntnu.no:27017/grades'; // Connecting to the MongoDB by using mongoose's connect function.\n\n_mongoose.default.connect(dbRoute, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true,\n  useFindAndModify: false\n}); // Connection is our active connection to the MongoDB\n\n\nconst connection = _mongoose.default.connection; // Once the connection is established, print message to console.\n\nconnection.once('open', function () {\n  console.log(\"MongoDB database connection established successfully\");\n}); // Handle all 404 errors (not found)\n\napp.use((req, res, next) => {\n  res.status(404).send(\"404 file not found. The information you are looking for is not here! Try a different path\");\n}); // Handles all requests resulting in a 500 response\n\napp.use((err, req, res, next) => {\n  console.error(err.stack);\n  res.sendFile(_path.default.join(__dirname, '../public/500.html'));\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJBUElfUE9SVCIsImFwcCIsInVzZSIsImJvZHlQYXJzZXIiLCJqc29uIiwiY291cnNlUm91dGVzIiwiZ3JhZGVSb3V0ZXMiLCJyZXEiLCJyZXMiLCJuZXh0IiwiaGVhZGVyIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyIsImRiUm91dGUiLCJtb25nb29zZSIsImNvbm5lY3QiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJ1c2VGaW5kQW5kTW9kaWZ5IiwiY29ubmVjdGlvbiIsIm9uY2UiLCJzdGF0dXMiLCJzZW5kIiwiZXJyIiwiZXJyb3IiLCJzdGFjayIsInNlbmRGaWxlIiwicGF0aCIsImpvaW4iLCJfX2Rpcm5hbWUiXSwibWFwcGluZ3MiOiI7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFDQTtBQUNBO0FBR0EsTUFBTUEsUUFBUSxHQUFHLElBQWpCLEMsQ0FBdUI7O0FBQ3ZCLE1BQU1DLEdBQUcsR0FBRyx1QkFBWixDLENBQXVCO0FBRXZCO0FBQ0E7O0FBQ0FBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRQyxvQkFBV0MsSUFBWCxFQUFSO0FBQ0FILEdBQUcsQ0FBQ0MsR0FBSixDQUFRLG9CQUFSLEUsQ0FFQTs7QUFDQUQsR0FBRyxDQUFDQyxHQUFKLENBQVEsVUFBUixFQUFvQkcsZUFBcEIsRSxDQUNBO0FBQ0E7QUFDQTs7QUFDQUosR0FBRyxDQUFDQyxHQUFKLENBQVEsOEJBQVIsRUFBd0NJLGVBQXhDLEUsQ0FFQTtBQUNBOztBQUNBTCxHQUFHLENBQUNDLEdBQUosQ0FBUSxVQUFTSyxHQUFULEVBQWNDLEdBQWQsRUFBbUJDLElBQW5CLEVBQXlCO0FBQzdCRCxFQUFBQSxHQUFHLENBQUNFLE1BQUosQ0FBVyw2QkFBWCxFQUEwQyxHQUExQyxFQUQ2QixDQUNtQjs7QUFDaERGLEVBQUFBLEdBQUcsQ0FBQ0UsTUFBSixDQUFXLDhCQUFYLEVBQTJDLGdEQUEzQyxFQUY2QixDQUVpRTs7QUFDOUZGLEVBQUFBLEdBQUcsQ0FBQ0UsTUFBSixDQUFXLDhCQUFYLEVBQTJDLFVBQTNDLEVBSDZCLENBRzJCOztBQUN4REQsRUFBQUEsSUFBSTtBQUNQLENBTEQsRSxDQU9BOztBQUNBUixHQUFHLENBQUNVLE1BQUosQ0FBV1gsUUFBWCxFQUFxQixNQUFNWSxPQUFPLENBQUNDLEdBQVIsQ0FBYSxxQkFBb0JiLFFBQVMsRUFBMUMsQ0FBM0IsRSxDQUVBOztBQUNBLE1BQU1jLE9BQU8sR0FBRyw0REFBaEIsQyxDQUVBOztBQUNBQyxrQkFBU0MsT0FBVCxDQUFpQkYsT0FBakIsRUFBMEI7QUFBRUcsRUFBQUEsZUFBZSxFQUFFLElBQW5CO0FBQXlCQyxFQUFBQSxrQkFBa0IsRUFBRSxJQUE3QztBQUFtREMsRUFBQUEsZ0JBQWdCLEVBQUU7QUFBckUsQ0FBMUIsRSxDQUNBOzs7QUFDQSxNQUFNQyxVQUFVLEdBQUdMLGtCQUFTSyxVQUE1QixDLENBRUE7O0FBQ0FBLFVBQVUsQ0FBQ0MsSUFBWCxDQUFnQixNQUFoQixFQUF3QixZQUFXO0FBQy9CVCxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxzREFBWjtBQUNILENBRkQsRSxDQUlBOztBQUNBWixHQUFHLENBQUNDLEdBQUosQ0FBUSxDQUFDSyxHQUFELEVBQUtDLEdBQUwsRUFBU0MsSUFBVCxLQUFrQjtBQUN0QkQsRUFBQUEsR0FBRyxDQUFDYyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsMkZBQXJCO0FBQ0QsQ0FGSCxFLENBSUE7O0FBQ0F0QixHQUFHLENBQUNDLEdBQUosQ0FBUSxDQUFDc0IsR0FBRCxFQUFLakIsR0FBTCxFQUFTQyxHQUFULEVBQWFDLElBQWIsS0FBc0I7QUFDMUJHLEVBQUFBLE9BQU8sQ0FBQ2EsS0FBUixDQUFjRCxHQUFHLENBQUNFLEtBQWxCO0FBQ0FsQixFQUFBQSxHQUFHLENBQUNtQixRQUFKLENBQWFDLGNBQUtDLElBQUwsQ0FBVUMsU0FBVixFQUFvQixvQkFBcEIsQ0FBYjtBQUNELENBSEgiLCJzb3VyY2VSb290IjoiL1VzZXJzL1ZpY3Rvci9Eb2N1bWVudHMvTlROVS9IMjAxOS9XZWJ1dHZpa2xpbmcvcHJvc2pla3RfMy9iYWNrZW5kIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcydcbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSdcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgY291cnNlUm91dGVzIGZyb20gXCIuL3JvdXRlcy9jb3Vyc2VcIlxuaW1wb3J0IGdyYWRlUm91dGVzIGZyb20gXCIuL3JvdXRlcy9ncmFkZXNcIlxuLy8gQmFiZWwgaXMgYWRkZWQgYXMgYSBkZXBlbmRlbmN5IGluIHBhY2thZ2UuanNvbiBhbmQgdXNlZCB0byB0eXBlIG1vZGVybiAuanMgc3ludGF4IGFuZCB0aGVuIHRyYW5zcGlsZWQuIFxuLy8gaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcycgaXMgZXF1YWwgdG8gY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKVxuXG5cbmNvbnN0IEFQSV9QT1JUID0gMzAwMTsgLy8gTGlzdGVuaW5nIGZvciBpbmNvbWluZyBIVFRQIHJlcXVlc3RzIG9uIHBvcnQgMzAwMVxuY29uc3QgYXBwID0gZXhwcmVzcygpOyAvLyBDcmVhdGluZyBhbiBleHByZXNzLW9iamVjdFxuXG4vLyBXaGVuIGNhbGxpbmcgYXBwLnVzZSgpLCB3ZSBhZGQgYW5vdGhlciBcImZpbHRlclwiIGZvciBhbGwgcmVxdWVzdHMgdG8gZ28gdGhyb3VnaC4gRS5nLiwgYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSkgcGFyc2VzIGluY29taW5nIHJlcXVlc3RzIHRvIEpTT04tZm9ybWF0LlxuLy8gVGhlIGJvZHlwYXJzZXIgbWFrZXMgaW5jb21pbmcgcmVxdWVzdCBib2R5IGRhdGEgdG8gZm9ybSB0aGUgZGF0YSB0byBiZSBhdmFpbGFibGUgdGhlIHdheSB3ZSB3YW50IHRvLlxuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5hcHAudXNlKGNvcnMoKSk7XG5cbi8vIEFsbCByZXF1ZXN0cyB0byBhZHJlc3MuY29tL2NvdXJzZXMgaXMgaGFuZGxlZCBieSB0aGUgbG9naWMgaW5zaWRlIGNvdXJzZVJvdXRlcywgd2hpY2ggaXMgaW1wb3J0ZWQgZnJvbSAvcm91dGVzL2NvdXJzZS5cbmFwcC51c2UoJy9jb3Vyc2VzJywgY291cnNlUm91dGVzKVxuLy8gU2FtZSBnb2VzIGZvciBhZHJlc3MuY29tL2NvdXJzZXMvOmNvdXJzZV9jb2RlL2dyYWRlcy4gVGhlIHJlYXNvbiBmb3IgdGhpcyBub3QgYmVpbmcgaGFuZGxlZCBpbnNpZGUgY291cnNlUm91dGVzIGlzIHRoYXQgb3VyIERCIGhhdmUgdG8gc2VwYXJhdGUgY29sbGVjdGlvbnNcbi8vIE9uZSBjb2xsZWN0aW9uIGZvciBhbGwgdGhlIGNvdXJzZXMsIGFuZCBvbmUgY29sbGVjdGlvbiBmb3IgYWxsIHRoZSBncmFkZXMgZm9yIGFsbCBzZW1lc3RlcnMgZm9yIGFsbCBjb3Vyc2VzLiBEdWUgdG8gaHVnZSBhbW91bnQgb2YgZGF0YSB3ZSBkZWNpZGVkIHRvIG5vdCBlbWJlZCB0aGUgZ3JhZGVzXG4vLyBjb2xsZWN0aW9uIHdpdGhpbiB0aGUgY291cnNlcyBjb2xsZWN0aW9uLCBhcyB0aGlzIHdvdWxkIG1ha2UgdGhlIGRhdGEgbGVzcyB0cmFuc3BhcmVudCBhbmQgbWFrZSB0aGUgSlNPTiBmb3IganVzdCBvbmUgY291cnNlIG9iamVjdCB2ZXJ5IGxvbmcuXG5hcHAudXNlKCcvY291cnNlcy86Y291cnNlX2NvZGUvZ3JhZGVzJywgZ3JhZGVSb3V0ZXMpXG5cbi8vIENyb3NzLU9yaWdpbiBSZXNvdXJjZSBTaGFyaW5nIChDT1JTKS4gVXNlZCB0byBzcGVjaWZ5IHdoYXQgdHlwZSBvZiByZXF1ZXN0cyBpcyBhbGxvd2VkLCB3aG8gbWF5IHNlbmQgcmVxdWVzdHMgYW5kIHdoYXQgaGVhZGVyLXR5cGVzLiBcbi8vIENPUlMgd29ya3MgYnkgYWRkaW5nIG5ldyBIVFRQIGhlYWRlcnMgdGhhdCBsZXQgc2VydmVycyBkZXNjcmliZSB3aGljaCBvcmlnaW5zIGFyZSBwZXJtaXR0ZWQgdG8gcmVhZCBpbmZvcm1hdGlvbiBmcm9tIGEgd2ViIGJyb3dzZXIuXG5hcHAudXNlKGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgcmVzLmhlYWRlcihcIkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpblwiLCBcIipcIik7IC8vICogaW5kaWNhdGVzIHRoYXQgYW55b25lIGNhbiBjb25uZWN0LiBDYW4gYmUgY2hhbmdlZCB0byBzcGVjaWZpYyBJUHMuXG4gICAgcmVzLmhlYWRlcihcIkFjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnNcIiwgXCJPcmlnaW4sIFgtUmVxdWVzdGVkLVdpdGgsIENvbnRlbnQtVHlwZSwgQWNjZXB0XCIpOyAvLyBXaGljaCBoZWFkZXJzIHdlIGFsbG93XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsIFBVVCcpOyAvLyBEZWZpbmluZyBhbGwgdHlwZSBvZiByZXF1ZXN0cyB3ZSB3YW50IHRvIGFjY2VwdC4gV2Ugb25seSBhbGxvdyBHRVQgYW5kIFBVVC4gXG4gICAgbmV4dCgpO1xufSk7XG5cbi8vIExpc3RlbmluZyBmb3IgcmVxdWVzdHMgb24gcG9ydCBBUElfUE9SVCwgYW5kIGxvZ2dpbmcgdG8gY29uc29sZSB3aGVuIGJhY2tlbmQtc2VydmVyIGlzIHJ1bm5pbmcuXG5hcHAubGlzdGVuKEFQSV9QT1JULCAoKSA9PiBjb25zb2xlLmxvZyhgTElTVEVOSU5HIE9OIFBPUlQgJHtBUElfUE9SVH1gKSk7XG5cbi8vIEFkcmVzcyB0byBNb25nb0RCLiBPbiBmb3JtYXQ6IG1vbmdvZGI6Ly88dXNlcm5hbWU+Ojxwd2Q+QDxJUD4vPEROUz46PHBvcnQ+LzxkYXRhYmFzZT5cbmNvbnN0IGRiUm91dGUgPSAnbW9uZ29kYjovL3ZpY3Rvam86YWRtaW5AaXQyODEwLTM5LmlkaS5udG51Lm5vOjI3MDE3L2dyYWRlcyc7XG5cbi8vIENvbm5lY3RpbmcgdG8gdGhlIE1vbmdvREIgYnkgdXNpbmcgbW9uZ29vc2UncyBjb25uZWN0IGZ1bmN0aW9uLlxubW9uZ29vc2UuY29ubmVjdChkYlJvdXRlLCB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSwgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLCB1c2VGaW5kQW5kTW9kaWZ5OiBmYWxzZSB9KTtcbi8vIENvbm5lY3Rpb24gaXMgb3VyIGFjdGl2ZSBjb25uZWN0aW9uIHRvIHRoZSBNb25nb0RCXG5jb25zdCBjb25uZWN0aW9uID0gbW9uZ29vc2UuY29ubmVjdGlvbjtcblxuLy8gT25jZSB0aGUgY29ubmVjdGlvbiBpcyBlc3RhYmxpc2hlZCwgcHJpbnQgbWVzc2FnZSB0byBjb25zb2xlLlxuY29ubmVjdGlvbi5vbmNlKCdvcGVuJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coXCJNb25nb0RCIGRhdGFiYXNlIGNvbm5lY3Rpb24gZXN0YWJsaXNoZWQgc3VjY2Vzc2Z1bGx5XCIpO1xufSlcblxuLy8gSGFuZGxlIGFsbCA0MDQgZXJyb3JzIChub3QgZm91bmQpXG5hcHAudXNlKChyZXEscmVzLG5leHQpID0+IHtcbiAgICByZXMuc3RhdHVzKDQwNCkuc2VuZChcIjQwNCBmaWxlIG5vdCBmb3VuZC4gVGhlIGluZm9ybWF0aW9uIHlvdSBhcmUgbG9va2luZyBmb3IgaXMgbm90IGhlcmUhIFRyeSBhIGRpZmZlcmVudCBwYXRoXCIpXG4gIH0pXG5cbi8vIEhhbmRsZXMgYWxsIHJlcXVlc3RzIHJlc3VsdGluZyBpbiBhIDUwMCByZXNwb25zZVxuYXBwLnVzZSgoZXJyLHJlcSxyZXMsbmV4dCkgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyLnN0YWNrKVxuICAgIHJlcy5zZW5kRmlsZShwYXRoLmpvaW4oX19kaXJuYW1lLCcuLi9wdWJsaWMvNTAwLmh0bWwnKSlcbiAgfSlcblxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "server.js"
      ],
      "names": [
        "API_PORT",
        "app",
        "use",
        "bodyParser",
        "json",
        "courseRoutes",
        "gradeRoutes",
        "req",
        "res",
        "next",
        "header",
        "listen",
        "console",
        "log",
        "dbRoute",
        "mongoose",
        "connect",
        "useNewUrlParser",
        "useUnifiedTopology",
        "useFindAndModify",
        "connection",
        "once",
        "status",
        "send",
        "err",
        "error",
        "stack",
        "sendFile",
        "path",
        "join",
        "__dirname"
      ],
      "mappings": ";;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AACA;AACA;AAGA,MAAMA,QAAQ,GAAG,IAAjB,C,CAAuB;;AACvB,MAAMC,GAAG,GAAG,uBAAZ,C,CAAuB;AAEvB;AACA;;AACAA,GAAG,CAACC,GAAJ,CAAQC,oBAAWC,IAAX,EAAR;AACAH,GAAG,CAACC,GAAJ,CAAQ,oBAAR,E,CAEA;;AACAD,GAAG,CAACC,GAAJ,CAAQ,UAAR,EAAoBG,eAApB,E,CACA;AACA;AACA;;AACAJ,GAAG,CAACC,GAAJ,CAAQ,8BAAR,EAAwCI,eAAxC,E,CAEA;AACA;;AACAL,GAAG,CAACC,GAAJ,CAAQ,UAASK,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AAC7BD,EAAAA,GAAG,CAACE,MAAJ,CAAW,6BAAX,EAA0C,GAA1C,EAD6B,CACmB;;AAChDF,EAAAA,GAAG,CAACE,MAAJ,CAAW,8BAAX,EAA2C,gDAA3C,EAF6B,CAEiE;;AAC9FF,EAAAA,GAAG,CAACE,MAAJ,CAAW,8BAAX,EAA2C,UAA3C,EAH6B,CAG2B;;AACxDD,EAAAA,IAAI;AACP,CALD,E,CAOA;;AACAR,GAAG,CAACU,MAAJ,CAAWX,QAAX,EAAqB,MAAMY,OAAO,CAACC,GAAR,CAAa,qBAAoBb,QAAS,EAA1C,CAA3B,E,CAEA;;AACA,MAAMc,OAAO,GAAG,4DAAhB,C,CAEA;;AACAC,kBAASC,OAAT,CAAiBF,OAAjB,EAA0B;AAAEG,EAAAA,eAAe,EAAE,IAAnB;AAAyBC,EAAAA,kBAAkB,EAAE,IAA7C;AAAmDC,EAAAA,gBAAgB,EAAE;AAArE,CAA1B,E,CACA;;;AACA,MAAMC,UAAU,GAAGL,kBAASK,UAA5B,C,CAEA;;AACAA,UAAU,CAACC,IAAX,CAAgB,MAAhB,EAAwB,YAAW;AAC/BT,EAAAA,OAAO,CAACC,GAAR,CAAY,sDAAZ;AACH,CAFD,E,CAIA;;AACAZ,GAAG,CAACC,GAAJ,CAAQ,CAACK,GAAD,EAAKC,GAAL,EAASC,IAAT,KAAkB;AACtBD,EAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,2FAArB;AACD,CAFH,E,CAIA;;AACAtB,GAAG,CAACC,GAAJ,CAAQ,CAACsB,GAAD,EAAKjB,GAAL,EAASC,GAAT,EAAaC,IAAb,KAAsB;AAC1BG,EAAAA,OAAO,CAACa,KAAR,CAAcD,GAAG,CAACE,KAAlB;AACAlB,EAAAA,GAAG,CAACmB,QAAJ,CAAaC,cAAKC,IAAL,CAAUC,SAAV,EAAoB,oBAApB,CAAb;AACD,CAHH",
      "sourceRoot": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend",
      "sourcesContent": [
        "import express from 'express'\nimport mongoose from 'mongoose'\nimport bodyParser from 'body-parser';\nimport path from 'path';\nimport cors from 'cors';\nimport courseRoutes from \"./routes/course\"\nimport gradeRoutes from \"./routes/grades\"\n// Babel is added as a dependency in package.json and used to type modern .js syntax and then transpiled. \n// import express from 'express' is equal to const express = require('express')\n\n\nconst API_PORT = 3001; // Listening for incoming HTTP requests on port 3001\nconst app = express(); // Creating an express-object\n\n// When calling app.use(), we add another \"filter\" for all requests to go through. E.g., app.use(bodyParser.json()) parses incoming requests to JSON-format.\n// The bodyparser makes incoming request body data to form the data to be available the way we want to.\napp.use(bodyParser.json());\napp.use(cors());\n\n// All requests to adress.com/courses is handled by the logic inside courseRoutes, which is imported from /routes/course.\napp.use('/courses', courseRoutes)\n// Same goes for adress.com/courses/:course_code/grades. The reason for this not being handled inside courseRoutes is that our DB have to separate collections\n// One collection for all the courses, and one collection for all the grades for all semesters for all courses. Due to huge amount of data we decided to not embed the grades\n// collection within the courses collection, as this would make the data less transparent and make the JSON for just one course object very long.\napp.use('/courses/:course_code/grades', gradeRoutes)\n\n// Cross-Origin Resource Sharing (CORS). Used to specify what type of requests is allowed, who may send requests and what header-types. \n// CORS works by adding new HTTP headers that let servers describe which origins are permitted to read information from a web browser.\napp.use(function(req, res, next) {\n    res.header(\"Access-Control-Allow-Origin\", \"*\"); // * indicates that anyone can connect. Can be changed to specific IPs.\n    res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\"); // Which headers we allow\n    res.header('Access-Control-Allow-Methods', 'GET, PUT'); // Defining all type of requests we want to accept. We only allow GET and PUT. \n    next();\n});\n\n// Listening for requests on port API_PORT, and logging to console when backend-server is running.\napp.listen(API_PORT, () => console.log(`LISTENING ON PORT ${API_PORT}`));\n\n// Adress to MongoDB. On format: mongodb://<username>:<pwd>@<IP>/<DNS>:<port>/<database>\nconst dbRoute = 'mongodb://victojo:admin@it2810-39.idi.ntnu.no:27017/grades';\n\n// Connecting to the MongoDB by using mongoose's connect function.\nmongoose.connect(dbRoute, { useNewUrlParser: true, useUnifiedTopology: true, useFindAndModify: false });\n// Connection is our active connection to the MongoDB\nconst connection = mongoose.connection;\n\n// Once the connection is established, print message to console.\nconnection.once('open', function() {\n    console.log(\"MongoDB database connection established successfully\");\n})\n\n// Handle all 404 errors (not found)\napp.use((req,res,next) => {\n    res.status(404).send(\"404 file not found. The information you are looking for is not here! Try a different path\")\n  })\n\n// Handles all requests resulting in a 500 response\napp.use((err,req,res,next) => {\n    console.error(err.stack)\n    res.sendFile(path.join(__dirname,'../public/500.html'))\n  })\n\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1571743148134
  },
  "{\"sourceRoot\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend\",\"filename\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes/course.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend\",\"plugins\":[{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\"./src\"]}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"corejs2-usage\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null],\"exit\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"corejs\":{\"options\":{\"loose\":false,\"includePrerelease\":false},\"loose\":false,\"raw\":\"2.0.0\",\"major\":2,\"minor\":0,\"patch\":0,\"prerelease\":[],\"build\":[],\"version\":\"2.0.0\"},\"polyfillTargets\":{\"node\":\"10.15.3\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"regenerator\":false,\"debug\":false}}],\"presets\":[]}:7.6.4": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend",
      "filename": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes/course.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "./src"
            ]
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "corejs2-usage",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "Program": {
              "enter": [
                null
              ]
            },
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "YieldExpression": {
              "enter": [
                null
              ]
            },
            "MemberExpression": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "VariableDeclarator": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true,
            "Identifier": {
              "enter": [
                null
              ]
            },
            "JSXIdentifier": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "corejs": {
              "options": {
                "loose": false,
                "includePrerelease": false
              },
              "loose": false,
              "raw": "2.0.0",
              "major": 2,
              "minor": 0,
              "patch": 0,
              "prerelease": [],
              "build": [],
              "version": "2.0.0"
            },
            "polyfillTargets": {
              "node": "10.15.3"
            },
            "include": {},
            "exclude": {},
            "proposals": false,
            "shippedProposals": false,
            "regenerator": false,
            "debug": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes/course.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes/course.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes",
        "sourceFileName": "course.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _course = _interopRequireDefault(require(\"../models/course.model\"));\n\nvar _mongoose = require(\"mongoose\");\n\nvar _readline = require(\"readline\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// TODO: Add catch blocks for all functions to handle warnings in the console.\nconst courseRoutes = _express.default.Router(); // Cross-Origin Resource Sharing (CORS). Used to specify what type of requests is allowed, who may send requests and what header-types. \n// CORS works by adding new HTTP headers that let servers describe which origins are permitted to read information from a web browser.\n\n\ncourseRoutes.use((0, _cors.default)()); // Allow client to fetch data\n\ncourseRoutes.use(function (req, res, next) {\n  res.header('Access-Control-Allow-Origin', '*'); // Can change * to allow request from specific clients. In this project we dont care to handle security issues.\n\n  res.header('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n  res.header('Access-Control-Allow-Methods', 'GET, PUT'); // We only allow GET and PUT requests. On purpose, we decided to not have any functionality to add courses, neither delete them.\n\n  next();\n}); // The function passed into the get function handles all GET requests sent to it2810-39.idi.ntnu.no:<PORT-NUMBER>/courses \n// Further on, we're calling Course.find to get a list of all course items from the MongoDB. The find function takes one argument, a callback function\n// which is executed once the result is available. All results available in courses are added in JSON format to the response by calling res.json(courses).\n\ncourseRoutes.route('/').get(async function (req, res) {\n  // Saving all possible attributes for a course document in the collection in content object. \n  // Checks if attribute exists on req.query and saves it if it exists.\n  let content = {};\n  const query = await req.query;\n  var stringQuery = Object.keys(query)[0]; //This will be the input the user writes in the search bar\n  //Checks if there are any sort/filter specifications the query other than the key words\n\n  Object.keys(query).length > 1 ? (delete query[stringQuery], filtSort(query)) : searchOnly(stringQuery); //Makes query from user chosen filtering/sorting\n\n  function filtSort(query) {\n    if (query._id) {\n      content._id = query._id;\n    }\n\n    if (query.credits) {\n      content.credits = Number(query.credits);\n    }\n\n    if (query.taught_in_spring) {\n      content.taught_in_spring = true;\n    }\n\n    if (query.taught_in_autumn) {\n      content.taught_in_autumn = true;\n    }\n\n    if (query.content) {\n      content.content = {\n        $regex: RegExp(query.content),\n        $options: '-i'\n      };\n    }\n\n    if (query.learning_goal) {\n      content.learning_goal = {\n        $regex: RegExp(query.learning_goal),\n        $options: '-i'\n      };\n    } //Have to make the search as well, in addition to the sorting/filtering\n\n\n    searchOnly(stringQuery);\n  } //Only handles input from written in search bar in GUI. User only searches for norwegian_name or course_code\n\n\n  function searchOnly(stringQuery) {\n    if (allLetters(stringQuery)) {\n      containsCode(stringQuery) ? content.course_code = {\n        $regex: RegExp(stringQuery),\n        $options: '-i'\n      } : content.norwegian_name = {\n        $regex: RegExp(stringQuery),\n        $options: '-i'\n      };\n    } else if (containsNumber(stringQuery)) {\n      content.course_code = {\n        $regex: RegExp(stringQuery),\n        $options: '-i'\n      };\n    }\n  }\n\n  const courses = await _course.default.find(content, function (err, courses) {}).catch(err => console.log(err)); // Values retrieved by the query, else set to default values. Used in pagination and sorting of results.\n\n  let sorting = req.query.sorting ? req.query.sorting : 'norwegian_name';\n  let order = req.query.order ? req.query.order : '1';\n  let page = req.query.page ? req.query.page : 1;\n  let pages = parseInt(page);\n  let limit = req.query.limit ? req.query.limit : 10;\n  let lim = parseInt(limit); // console.log(content)\n  // Uses mongoose-paginate to paginate results. Plugin in imported in the course.model.js. Response to client is sent in this function. \n  // Takes to arguments. One content object, and one object containing pages, page limit and what to sort by.\n  // To go to next page of query results, add &page=<page_number> to the end of the query.\n  // Sorts by norwegian name unless sorting is specified in the query in ascending order (order : 1, use -1 for descending).\n  // Sorting and order may also be added to the query &sorting=course_code&order=-1.\n  // console.log(\"Content: \", content)\n\n  _course.default.paginate(content, {\n    page: pages,\n    limit: lim,\n    sort: {\n      [sorting]: [order]\n    }\n  }).then(paginated_content => {\n    // The content in json() is what is being returned in the HTTP Response. \n    // In this case paginated_content is the entire page containing all #page of objects\n    res.status(200).json(paginated_content);\n  }).catch(error => {\n    // In case of error, return status 500 and error message.\n    res.status(500).json(error);\n  });\n}); // This path endpoint is used to retrieve a course by its course_code. \n// This will return a single course object in JSON format as response to a GET request on course_code. \n// Course_code works as a key in the database (is unique for all documents in the collection)\n\ncourseRoutes.route('/:course_code').get(async (req, res) => {\n  let course_code = req.params.course_code;\n  course = await _course.default.find({\n    course_code: course_code\n  }, (err, course) => {\n    res.json(course);\n  }).catch(error => res.status(500).json(error));\n}); // For updating rows in collection with reviews and rated difficulty. PUT requests to it2810.39.idi.ntnu.no:3001/courses/<COURSE_CODE> will update the course \n// if the request contains a review AND a difficulty. \n\ncourseRoutes.put('/:course_code', (req, res) => {\n  // console.log(req.body.difficulty)\n  let difficulty = parseInt(req.body.difficulty); // Find the correct course in the DB. Course_code is a primary key, and the search will always return one result.\n\n  let course = _course.default.find({\n    course_code: req.params.course_code\n  });\n\n  if (req.body.review && 6 > difficulty > 0) {\n    // console.log(req.params.course_code)\n    // Find document \"course\" in db and push the review to the review array on the document. Also update difficulty to new average.\n    _course.default.findOneAndUpdate(course, {\n      \"$push\": {\n        \"reviews\": req.body.review\n      },\n      \"$push\": {\n        \"difficulty\": parseInt(req.body.difficulty)\n      }\n    }).then(course => res.json(course)).catch(err => res.status(500).json(err));\n  }\n});\nvar _default = courseRoutes;\nexports.default = _default;\n\nfunction containsCode(query) {\n  let codes = \"tma tdt ttm it tfy\";\n  return codes.includes(query.toLowerCase());\n}\n\nfunction allLetters(query) {\n  let letters = /^[A-Za-z\\s]+$/;\n  return letters.test(query);\n}\n\nfunction containsNumber(query) {\n  let numbers = /\\d/;\n  return numbers.test(query);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvdXJzZS5qcyJdLCJuYW1lcyI6WyJjb3Vyc2VSb3V0ZXMiLCJleHByZXNzIiwiUm91dGVyIiwidXNlIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlciIsInJvdXRlIiwiZ2V0IiwiY29udGVudCIsInF1ZXJ5Iiwic3RyaW5nUXVlcnkiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwiZmlsdFNvcnQiLCJzZWFyY2hPbmx5IiwiX2lkIiwiY3JlZGl0cyIsIk51bWJlciIsInRhdWdodF9pbl9zcHJpbmciLCJ0YXVnaHRfaW5fYXV0dW1uIiwiJHJlZ2V4IiwiUmVnRXhwIiwiJG9wdGlvbnMiLCJsZWFybmluZ19nb2FsIiwiYWxsTGV0dGVycyIsImNvbnRhaW5zQ29kZSIsImNvdXJzZV9jb2RlIiwibm9yd2VnaWFuX25hbWUiLCJjb250YWluc051bWJlciIsImNvdXJzZXMiLCJDb3Vyc2UiLCJmaW5kIiwiZXJyIiwiY2F0Y2giLCJjb25zb2xlIiwibG9nIiwic29ydGluZyIsIm9yZGVyIiwicGFnZSIsInBhZ2VzIiwicGFyc2VJbnQiLCJsaW1pdCIsImxpbSIsInBhZ2luYXRlIiwic29ydCIsInRoZW4iLCJwYWdpbmF0ZWRfY29udGVudCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInBhcmFtcyIsImNvdXJzZSIsInB1dCIsImRpZmZpY3VsdHkiLCJib2R5IiwicmV2aWV3IiwiZmluZE9uZUFuZFVwZGF0ZSIsImNvZGVzIiwiaW5jbHVkZXMiLCJ0b0xvd2VyQ2FzZSIsImxldHRlcnMiLCJ0ZXN0IiwibnVtYmVycyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUE7QUFFQSxNQUFNQSxZQUFZLEdBQUdDLGlCQUFRQyxNQUFSLEVBQXJCLEMsQ0FFQTtBQUNBOzs7QUFDQUYsWUFBWSxDQUFDRyxHQUFiLENBQWlCLG9CQUFqQixFLENBQ0U7O0FBQ0FILFlBQVksQ0FBQ0csR0FBYixDQUFpQixVQUFTQyxHQUFULEVBQWNDLEdBQWQsRUFBbUJDLElBQW5CLEVBQXlCO0FBQ3hDRCxFQUFBQSxHQUFHLENBQUNFLE1BQUosQ0FBVyw2QkFBWCxFQUEwQyxHQUExQyxFQUR3QyxDQUNROztBQUNoREYsRUFBQUEsR0FBRyxDQUFDRSxNQUFKLENBQVcsOEJBQVgsRUFBMkMsZ0RBQTNDO0FBQ0VGLEVBQUFBLEdBQUcsQ0FBQ0UsTUFBSixDQUFXLDhCQUFYLEVBQTJDLFVBQTNDLEVBSHNDLENBR2tCOztBQUN4REQsRUFBQUEsSUFBSTtBQUNULENBTEMsRSxDQU9GO0FBQ0E7QUFDQTs7QUFDQU4sWUFBWSxDQUFDUSxLQUFiLENBQW1CLEdBQW5CLEVBQXdCQyxHQUF4QixDQUE0QixnQkFBZUwsR0FBZixFQUFvQkMsR0FBcEIsRUFBeUI7QUFHakQ7QUFDQTtBQUNBLE1BQUlLLE9BQU8sR0FBRyxFQUFkO0FBQ0EsUUFBTUMsS0FBSyxHQUFHLE1BQU1QLEdBQUcsQ0FBQ08sS0FBeEI7QUFDQSxNQUFJQyxXQUFXLEdBQUdDLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZSCxLQUFaLEVBQW1CLENBQW5CLENBQWxCLENBUGlELENBT1Q7QUFFeEM7O0FBQ0FFLEVBQUFBLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZSCxLQUFaLEVBQW1CSSxNQUFuQixHQUE0QixDQUE1QixJQUFrQyxPQUFPSixLQUFLLENBQUNDLFdBQUQsQ0FBWixFQUEyQkksUUFBUSxDQUFDTCxLQUFELENBQXJFLElBQWdGTSxVQUFVLENBQUNMLFdBQUQsQ0FBMUYsQ0FWaUQsQ0FhakQ7O0FBQ0EsV0FBU0ksUUFBVCxDQUFrQkwsS0FBbEIsRUFBeUI7QUFFdkIsUUFBSUEsS0FBSyxDQUFDTyxHQUFWLEVBQWU7QUFBRVIsTUFBQUEsT0FBTyxDQUFDUSxHQUFSLEdBQWNQLEtBQUssQ0FBQ08sR0FBcEI7QUFBeUI7O0FBQzFDLFFBQUlQLEtBQUssQ0FBQ1EsT0FBVixFQUFtQjtBQUFFVCxNQUFBQSxPQUFPLENBQUNTLE9BQVIsR0FBa0JDLE1BQU0sQ0FBQ1QsS0FBSyxDQUFDUSxPQUFQLENBQXhCO0FBQXdDOztBQUM3RCxRQUFJUixLQUFLLENBQUNVLGdCQUFWLEVBQTRCO0FBQUVYLE1BQUFBLE9BQU8sQ0FBQ1csZ0JBQVIsR0FBMkIsSUFBM0I7QUFBZ0M7O0FBQzlELFFBQUlWLEtBQUssQ0FBQ1csZ0JBQVYsRUFBNEI7QUFBRVosTUFBQUEsT0FBTyxDQUFDWSxnQkFBUixHQUEyQixJQUEzQjtBQUFnQzs7QUFDOUQsUUFBSVgsS0FBSyxDQUFDRCxPQUFWLEVBQW1CO0FBQUVBLE1BQUFBLE9BQU8sQ0FBQ0EsT0FBUixHQUFrQjtBQUFDYSxRQUFBQSxNQUFNLEVBQUVDLE1BQU0sQ0FBQ2IsS0FBSyxDQUFDRCxPQUFQLENBQWY7QUFBZ0NlLFFBQUFBLFFBQVEsRUFBQztBQUF6QyxPQUFsQjtBQUFpRTs7QUFDdEYsUUFBSWQsS0FBSyxDQUFDZSxhQUFWLEVBQXlCO0FBQUVoQixNQUFBQSxPQUFPLENBQUNnQixhQUFSLEdBQXdCO0FBQUNILFFBQUFBLE1BQU0sRUFBRUMsTUFBTSxDQUFDYixLQUFLLENBQUNlLGFBQVAsQ0FBZjtBQUFzQ0QsUUFBQUEsUUFBUSxFQUFDO0FBQS9DLE9BQXhCO0FBQTZFLEtBUGpGLENBU3ZCOzs7QUFDQVIsSUFBQUEsVUFBVSxDQUFDTCxXQUFELENBQVY7QUFDRCxHQXpCZ0QsQ0EyQmpEOzs7QUFDQSxXQUFTSyxVQUFULENBQW9CTCxXQUFwQixFQUFpQztBQUMvQixRQUFHZSxVQUFVLENBQUNmLFdBQUQsQ0FBYixFQUE0QjtBQUMxQmdCLE1BQUFBLFlBQVksQ0FBQ2hCLFdBQUQsQ0FBWixHQUE0QkYsT0FBTyxDQUFDbUIsV0FBUixHQUFzQjtBQUFDTixRQUFBQSxNQUFNLEVBQUVDLE1BQU0sQ0FBQ1osV0FBRCxDQUFmO0FBQThCYSxRQUFBQSxRQUFRLEVBQUM7QUFBdkMsT0FBbEQsR0FDNEJmLE9BQU8sQ0FBQ29CLGNBQVIsR0FBeUI7QUFBQ1AsUUFBQUEsTUFBTSxFQUFHQyxNQUFNLENBQUNaLFdBQUQsQ0FBaEI7QUFBK0JhLFFBQUFBLFFBQVEsRUFBQztBQUF4QyxPQURyRDtBQUVELEtBSEQsTUFJSyxJQUFJTSxjQUFjLENBQUNuQixXQUFELENBQWxCLEVBQWlDO0FBQ3BDRixNQUFBQSxPQUFPLENBQUNtQixXQUFSLEdBQXNCO0FBQUNOLFFBQUFBLE1BQU0sRUFBRUMsTUFBTSxDQUFDWixXQUFELENBQWY7QUFBOEJhLFFBQUFBLFFBQVEsRUFBQztBQUF2QyxPQUF0QjtBQUNEO0FBQ0Y7O0FBR0QsUUFBTU8sT0FBTyxHQUFHLE1BQU1DLGdCQUFPQyxJQUFQLENBQWF4QixPQUFiLEVBQXVCLFVBQVN5QixHQUFULEVBQWNILE9BQWQsRUFBdUIsQ0FBRSxDQUFoRCxFQUFrREksS0FBbEQsQ0FBd0RELEdBQUcsSUFBSUUsT0FBTyxDQUFDQyxHQUFSLENBQVlILEdBQVosQ0FBL0QsQ0FBdEIsQ0F2Q2lELENBeUNqRDs7QUFDQSxNQUFJSSxPQUFPLEdBQUduQyxHQUFHLENBQUNPLEtBQUosQ0FBVTRCLE9BQVYsR0FBb0JuQyxHQUFHLENBQUNPLEtBQUosQ0FBVTRCLE9BQTlCLEdBQXVDLGdCQUFyRDtBQUNBLE1BQUlDLEtBQUssR0FBR3BDLEdBQUcsQ0FBQ08sS0FBSixDQUFVNkIsS0FBVixHQUFrQnBDLEdBQUcsQ0FBQ08sS0FBSixDQUFVNkIsS0FBNUIsR0FBb0MsR0FBaEQ7QUFDQSxNQUFJQyxJQUFJLEdBQUdyQyxHQUFHLENBQUNPLEtBQUosQ0FBVThCLElBQVYsR0FBaUJyQyxHQUFHLENBQUNPLEtBQUosQ0FBVThCLElBQTNCLEdBQWtDLENBQTdDO0FBQ0EsTUFBSUMsS0FBSyxHQUFDQyxRQUFRLENBQUNGLElBQUQsQ0FBbEI7QUFDQSxNQUFJRyxLQUFLLEdBQUd4QyxHQUFHLENBQUNPLEtBQUosQ0FBVWlDLEtBQVYsR0FBa0J4QyxHQUFHLENBQUNPLEtBQUosQ0FBVWlDLEtBQTVCLEdBQW9DLEVBQWhEO0FBQ0EsTUFBSUMsR0FBRyxHQUFDRixRQUFRLENBQUNDLEtBQUQsQ0FBaEIsQ0EvQ2lELENBZ0RqRDtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQVgsa0JBQU9hLFFBQVAsQ0FBZ0JwQyxPQUFoQixFQUNJO0FBQUkrQixJQUFBQSxJQUFJLEVBQUVDLEtBQVY7QUFDSUUsSUFBQUEsS0FBSyxFQUFFQyxHQURYO0FBRUlFLElBQUFBLElBQUksRUFBRTtBQUFDLE9BQUNSLE9BQUQsR0FBVSxDQUFDQyxLQUFEO0FBQVg7QUFGVixHQURKLEVBS0tRLElBTEwsQ0FLVUMsaUJBQWlCLElBQUk7QUFDdkI7QUFDQTtBQUNBNUMsSUFBQUEsR0FBRyxDQUFDNkMsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCRixpQkFBckI7QUFDSCxHQVRMLEVBVUtiLEtBVkwsQ0FVV2dCLEtBQUssSUFBSTtBQUNaO0FBQ0YvQyxJQUFBQSxHQUFHLENBQUM2QyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUJDLEtBQXJCO0FBQ0QsR0FiTDtBQWNILENBdEVELEUsQ0F3RUE7QUFDQTtBQUNBOztBQUNBcEQsWUFBWSxDQUFDUSxLQUFiLENBQW1CLGVBQW5CLEVBQW9DQyxHQUFwQyxDQUF3QyxPQUFPTCxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDeEQsTUFBSXdCLFdBQVcsR0FBR3pCLEdBQUcsQ0FBQ2lELE1BQUosQ0FBV3hCLFdBQTdCO0FBQ0F5QixFQUFBQSxNQUFNLEdBQUcsTUFBTXJCLGdCQUFPQyxJQUFQLENBQVk7QUFBQ0wsSUFBQUEsV0FBVyxFQUFHQTtBQUFmLEdBQVosRUFBeUMsQ0FBQ00sR0FBRCxFQUFNbUIsTUFBTixLQUFpQjtBQUNyRWpELElBQUFBLEdBQUcsQ0FBQzhDLElBQUosQ0FBU0csTUFBVDtBQUNILEdBRmMsRUFFWmxCLEtBRlksQ0FFTmdCLEtBQUssSUFBSS9DLEdBQUcsQ0FBQzZDLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQkMsS0FBckIsQ0FGSCxDQUFmO0FBR0gsQ0FMRCxFLENBUUE7QUFDQTs7QUFDQXBELFlBQVksQ0FBQ3VELEdBQWIsQ0FBaUIsZUFBakIsRUFBa0MsQ0FBQ25ELEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQzVDO0FBQ0EsTUFBSW1ELFVBQVUsR0FBR2IsUUFBUSxDQUFDdkMsR0FBRyxDQUFDcUQsSUFBSixDQUFTRCxVQUFWLENBQXpCLENBRjRDLENBRzVDOztBQUNBLE1BQUlGLE1BQU0sR0FBR3JCLGdCQUFPQyxJQUFQLENBQVk7QUFBQ0wsSUFBQUEsV0FBVyxFQUFHekIsR0FBRyxDQUFDaUQsTUFBSixDQUFXeEI7QUFBMUIsR0FBWixDQUFiOztBQUNBLE1BQUl6QixHQUFHLENBQUNxRCxJQUFKLENBQVNDLE1BQVQsSUFBbUIsSUFBRUYsVUFBRixHQUFhLENBQXBDLEVBQXVDO0FBQ25DO0FBQ0E7QUFDQXZCLG9CQUFPMEIsZ0JBQVAsQ0FBd0JMLE1BQXhCLEVBQWdDO0FBQUMsZUFBUztBQUFFLG1CQUFXbEQsR0FBRyxDQUFDcUQsSUFBSixDQUFTQztBQUF0QixPQUFWO0FBQTJDLGVBQVU7QUFBQyxzQkFBZWYsUUFBUSxDQUFDdkMsR0FBRyxDQUFDcUQsSUFBSixDQUFTRCxVQUFWO0FBQXhCO0FBQXJELEtBQWhDLEVBQ0NSLElBREQsQ0FDTU0sTUFBTSxJQUFJakQsR0FBRyxDQUFDOEMsSUFBSixDQUFTRyxNQUFULENBRGhCLEVBRUNsQixLQUZELENBRU9ELEdBQUcsSUFBSTlCLEdBQUcsQ0FBQzZDLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQmhCLEdBQXJCLENBRmQ7QUFHSDtBQUNKLENBWkQ7ZUFpQmVuQyxZOzs7QUFFZixTQUFTNEIsWUFBVCxDQUFzQmpCLEtBQXRCLEVBQTZCO0FBQzNCLE1BQUlpRCxLQUFLLEdBQUcsb0JBQVo7QUFDQSxTQUFPQSxLQUFLLENBQUNDLFFBQU4sQ0FBZWxELEtBQUssQ0FBQ21ELFdBQU4sRUFBZixDQUFQO0FBQ0Q7O0FBR0QsU0FBU25DLFVBQVQsQ0FBb0JoQixLQUFwQixFQUEyQjtBQUN6QixNQUFJb0QsT0FBTyxHQUFHLGVBQWQ7QUFDQSxTQUFPQSxPQUFPLENBQUNDLElBQVIsQ0FBYXJELEtBQWIsQ0FBUDtBQUNEOztBQUVELFNBQVNvQixjQUFULENBQXdCcEIsS0FBeEIsRUFBK0I7QUFDN0IsTUFBSXNELE9BQU8sR0FBRyxJQUFkO0FBQ0EsU0FBT0EsT0FBTyxDQUFDRCxJQUFSLENBQWFyRCxLQUFiLENBQVA7QUFDRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvVmljdG9yL0RvY3VtZW50cy9OVE5VL0gyMDE5L1dlYnV0dmlrbGluZy9wcm9zamVrdF8zL2JhY2tlbmQvcm91dGVzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcbmltcG9ydCBDb3Vyc2UgZnJvbSAnLi4vbW9kZWxzL2NvdXJzZS5tb2RlbCc7XG5pbXBvcnQgeyBtb2RlbCB9IGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCB7IGNsZWFyU2NyZWVuRG93biB9IGZyb20gJ3JlYWRsaW5lJztcblxuLy8gVE9ETzogQWRkIGNhdGNoIGJsb2NrcyBmb3IgYWxsIGZ1bmN0aW9ucyB0byBoYW5kbGUgd2FybmluZ3MgaW4gdGhlIGNvbnNvbGUuXG5cbmNvbnN0IGNvdXJzZVJvdXRlcyA9IGV4cHJlc3MuUm91dGVyKClcblxuLy8gQ3Jvc3MtT3JpZ2luIFJlc291cmNlIFNoYXJpbmcgKENPUlMpLiBVc2VkIHRvIHNwZWNpZnkgd2hhdCB0eXBlIG9mIHJlcXVlc3RzIGlzIGFsbG93ZWQsIHdobyBtYXkgc2VuZCByZXF1ZXN0cyBhbmQgd2hhdCBoZWFkZXItdHlwZXMuIFxuLy8gQ09SUyB3b3JrcyBieSBhZGRpbmcgbmV3IEhUVFAgaGVhZGVycyB0aGF0IGxldCBzZXJ2ZXJzIGRlc2NyaWJlIHdoaWNoIG9yaWdpbnMgYXJlIHBlcm1pdHRlZCB0byByZWFkIGluZm9ybWF0aW9uIGZyb20gYSB3ZWIgYnJvd3Nlci5cbmNvdXJzZVJvdXRlcy51c2UoY29ycygpKTtcbiAgLy8gQWxsb3cgY2xpZW50IHRvIGZldGNoIGRhdGFcbiAgY291cnNlUm91dGVzLnVzZShmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICcqJyk7IC8vIENhbiBjaGFuZ2UgKiB0byBhbGxvdyByZXF1ZXN0IGZyb20gc3BlY2lmaWMgY2xpZW50cy4gSW4gdGhpcyBwcm9qZWN0IHdlIGRvbnQgY2FyZSB0byBoYW5kbGUgc2VjdXJpdHkgaXNzdWVzLlxuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnT3JpZ2luLCBYLVJlcXVlc3RlZC1XaXRoLCBDb250ZW50LVR5cGUsIEFjY2VwdCcpO1xuICAgICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsIFBVVCcpOyAvLyBXZSBvbmx5IGFsbG93IEdFVCBhbmQgUFVUIHJlcXVlc3RzLiBPbiBwdXJwb3NlLCB3ZSBkZWNpZGVkIHRvIG5vdCBoYXZlIGFueSBmdW5jdGlvbmFsaXR5IHRvIGFkZCBjb3Vyc2VzLCBuZWl0aGVyIGRlbGV0ZSB0aGVtLlxuICAgICAgbmV4dCgpO1xufSk7XG5cbi8vIFRoZSBmdW5jdGlvbiBwYXNzZWQgaW50byB0aGUgZ2V0IGZ1bmN0aW9uIGhhbmRsZXMgYWxsIEdFVCByZXF1ZXN0cyBzZW50IHRvIGl0MjgxMC0zOS5pZGkubnRudS5ubzo8UE9SVC1OVU1CRVI+L2NvdXJzZXMgXG4vLyBGdXJ0aGVyIG9uLCB3ZSdyZSBjYWxsaW5nIENvdXJzZS5maW5kIHRvIGdldCBhIGxpc3Qgb2YgYWxsIGNvdXJzZSBpdGVtcyBmcm9tIHRoZSBNb25nb0RCLiBUaGUgZmluZCBmdW5jdGlvbiB0YWtlcyBvbmUgYXJndW1lbnQsIGEgY2FsbGJhY2sgZnVuY3Rpb25cbi8vIHdoaWNoIGlzIGV4ZWN1dGVkIG9uY2UgdGhlIHJlc3VsdCBpcyBhdmFpbGFibGUuIEFsbCByZXN1bHRzIGF2YWlsYWJsZSBpbiBjb3Vyc2VzIGFyZSBhZGRlZCBpbiBKU09OIGZvcm1hdCB0byB0aGUgcmVzcG9uc2UgYnkgY2FsbGluZyByZXMuanNvbihjb3Vyc2VzKS5cbmNvdXJzZVJvdXRlcy5yb3V0ZSgnLycpLmdldChhc3luYyBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgIFxuXG4gICAgLy8gU2F2aW5nIGFsbCBwb3NzaWJsZSBhdHRyaWJ1dGVzIGZvciBhIGNvdXJzZSBkb2N1bWVudCBpbiB0aGUgY29sbGVjdGlvbiBpbiBjb250ZW50IG9iamVjdC4gXG4gICAgLy8gQ2hlY2tzIGlmIGF0dHJpYnV0ZSBleGlzdHMgb24gcmVxLnF1ZXJ5IGFuZCBzYXZlcyBpdCBpZiBpdCBleGlzdHMuXG4gICAgbGV0IGNvbnRlbnQgPSB7fTtcbiAgICBjb25zdCBxdWVyeSA9IGF3YWl0IHJlcS5xdWVyeTtcbiAgICB2YXIgc3RyaW5nUXVlcnkgPSBPYmplY3Qua2V5cyhxdWVyeSlbMF0gLy9UaGlzIHdpbGwgYmUgdGhlIGlucHV0IHRoZSB1c2VyIHdyaXRlcyBpbiB0aGUgc2VhcmNoIGJhclxuXG4gICAgLy9DaGVja3MgaWYgdGhlcmUgYXJlIGFueSBzb3J0L2ZpbHRlciBzcGVjaWZpY2F0aW9ucyB0aGUgcXVlcnkgb3RoZXIgdGhhbiB0aGUga2V5IHdvcmRzXG4gICAgT2JqZWN0LmtleXMocXVlcnkpLmxlbmd0aCA+IDEgPyAoIGRlbGV0ZSBxdWVyeVtzdHJpbmdRdWVyeV0sIGZpbHRTb3J0KHF1ZXJ5KSkgOiBzZWFyY2hPbmx5KHN0cmluZ1F1ZXJ5KVxuICAgXG4gIFxuICAgIC8vTWFrZXMgcXVlcnkgZnJvbSB1c2VyIGNob3NlbiBmaWx0ZXJpbmcvc29ydGluZ1xuICAgIGZ1bmN0aW9uIGZpbHRTb3J0KHF1ZXJ5KSB7XG5cbiAgICAgIGlmIChxdWVyeS5faWQpIHsgY29udGVudC5faWQgPSBxdWVyeS5faWQgfSBcbiAgICAgIGlmIChxdWVyeS5jcmVkaXRzKSB7IGNvbnRlbnQuY3JlZGl0cyA9IE51bWJlcihxdWVyeS5jcmVkaXRzKX1cbiAgICAgIGlmIChxdWVyeS50YXVnaHRfaW5fc3ByaW5nKSB7IGNvbnRlbnQudGF1Z2h0X2luX3NwcmluZyA9IHRydWV9IFxuICAgICAgaWYgKHF1ZXJ5LnRhdWdodF9pbl9hdXR1bW4pIHsgY29udGVudC50YXVnaHRfaW5fYXV0dW1uID0gdHJ1ZX0gXG4gICAgICBpZiAocXVlcnkuY29udGVudCkgeyBjb250ZW50LmNvbnRlbnQgPSB7JHJlZ2V4OiBSZWdFeHAocXVlcnkuY29udGVudCksICRvcHRpb25zOictaSd9fVxuICAgICAgaWYgKHF1ZXJ5LmxlYXJuaW5nX2dvYWwpIHsgY29udGVudC5sZWFybmluZ19nb2FsID0geyRyZWdleDogUmVnRXhwKHF1ZXJ5LmxlYXJuaW5nX2dvYWwpLCAkb3B0aW9uczonLWknfX1cblxuICAgICAgLy9IYXZlIHRvIG1ha2UgdGhlIHNlYXJjaCBhcyB3ZWxsLCBpbiBhZGRpdGlvbiB0byB0aGUgc29ydGluZy9maWx0ZXJpbmdcbiAgICAgIHNlYXJjaE9ubHkoc3RyaW5nUXVlcnkpXG4gICAgfVxuICBcbiAgICAvL09ubHkgaGFuZGxlcyBpbnB1dCBmcm9tIHdyaXR0ZW4gaW4gc2VhcmNoIGJhciBpbiBHVUkuIFVzZXIgb25seSBzZWFyY2hlcyBmb3Igbm9yd2VnaWFuX25hbWUgb3IgY291cnNlX2NvZGVcbiAgICBmdW5jdGlvbiBzZWFyY2hPbmx5KHN0cmluZ1F1ZXJ5KSB7XG4gICAgICBpZihhbGxMZXR0ZXJzKHN0cmluZ1F1ZXJ5KSkge1xuICAgICAgICBjb250YWluc0NvZGUoc3RyaW5nUXVlcnkpID8gY29udGVudC5jb3Vyc2VfY29kZSA9IHskcmVnZXg6IFJlZ0V4cChzdHJpbmdRdWVyeSksICRvcHRpb25zOictaSd9IDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50Lm5vcndlZ2lhbl9uYW1lID0geyRyZWdleCA6IFJlZ0V4cChzdHJpbmdRdWVyeSksICRvcHRpb25zOictaSd9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChjb250YWluc051bWJlcihzdHJpbmdRdWVyeSkpIHtcbiAgICAgICAgY29udGVudC5jb3Vyc2VfY29kZSA9IHskcmVnZXg6IFJlZ0V4cChzdHJpbmdRdWVyeSksICRvcHRpb25zOictaSd9XG4gICAgICB9XG4gICAgfVxuICAgIFxuXG4gICAgY29uc3QgY291cnNlcyA9IGF3YWl0IENvdXJzZS5maW5kKChjb250ZW50KSwgZnVuY3Rpb24oZXJyLCBjb3Vyc2VzKSB7fSkuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xuICAgIFxuICAgIC8vIFZhbHVlcyByZXRyaWV2ZWQgYnkgdGhlIHF1ZXJ5LCBlbHNlIHNldCB0byBkZWZhdWx0IHZhbHVlcy4gVXNlZCBpbiBwYWdpbmF0aW9uIGFuZCBzb3J0aW5nIG9mIHJlc3VsdHMuXG4gICAgbGV0IHNvcnRpbmcgPSByZXEucXVlcnkuc29ydGluZyA/IHJlcS5xdWVyeS5zb3J0aW5nOiAnbm9yd2VnaWFuX25hbWUnO1xuICAgIGxldCBvcmRlciA9IHJlcS5xdWVyeS5vcmRlciA/IHJlcS5xdWVyeS5vcmRlciA6ICcxJztcbiAgICBsZXQgcGFnZSA9IHJlcS5xdWVyeS5wYWdlID8gcmVxLnF1ZXJ5LnBhZ2UgOiAxO1xuICAgIGxldCBwYWdlcz1wYXJzZUludChwYWdlKTtcbiAgICBsZXQgbGltaXQgPSByZXEucXVlcnkubGltaXQgPyByZXEucXVlcnkubGltaXQgOiAxMDtcbiAgICBsZXQgbGltPXBhcnNlSW50KGxpbWl0KTtcbiAgICAvLyBjb25zb2xlLmxvZyhjb250ZW50KVxuXG4gICAgLy8gVXNlcyBtb25nb29zZS1wYWdpbmF0ZSB0byBwYWdpbmF0ZSByZXN1bHRzLiBQbHVnaW4gaW4gaW1wb3J0ZWQgaW4gdGhlIGNvdXJzZS5tb2RlbC5qcy4gUmVzcG9uc2UgdG8gY2xpZW50IGlzIHNlbnQgaW4gdGhpcyBmdW5jdGlvbi4gXG4gICAgLy8gVGFrZXMgdG8gYXJndW1lbnRzLiBPbmUgY29udGVudCBvYmplY3QsIGFuZCBvbmUgb2JqZWN0IGNvbnRhaW5pbmcgcGFnZXMsIHBhZ2UgbGltaXQgYW5kIHdoYXQgdG8gc29ydCBieS5cbiAgICAvLyBUbyBnbyB0byBuZXh0IHBhZ2Ugb2YgcXVlcnkgcmVzdWx0cywgYWRkICZwYWdlPTxwYWdlX251bWJlcj4gdG8gdGhlIGVuZCBvZiB0aGUgcXVlcnkuXG4gICAgLy8gU29ydHMgYnkgbm9yd2VnaWFuIG5hbWUgdW5sZXNzIHNvcnRpbmcgaXMgc3BlY2lmaWVkIGluIHRoZSBxdWVyeSBpbiBhc2NlbmRpbmcgb3JkZXIgKG9yZGVyIDogMSwgdXNlIC0xIGZvciBkZXNjZW5kaW5nKS5cbiAgICAvLyBTb3J0aW5nIGFuZCBvcmRlciBtYXkgYWxzbyBiZSBhZGRlZCB0byB0aGUgcXVlcnkgJnNvcnRpbmc9Y291cnNlX2NvZGUmb3JkZXI9LTEuXG4gICAgLy8gY29uc29sZS5sb2coXCJDb250ZW50OiBcIiwgY29udGVudClcbiAgICBDb3Vyc2UucGFnaW5hdGUoY29udGVudCxcbiAgICAgICAgeyAgIHBhZ2U6IHBhZ2VzLFxuICAgICAgICAgICAgbGltaXQ6IGxpbSxcbiAgICAgICAgICAgIHNvcnQ6IHtbc29ydGluZ106W29yZGVyXX1cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4ocGFnaW5hdGVkX2NvbnRlbnQgPT4ge1xuICAgICAgICAgICAgLy8gVGhlIGNvbnRlbnQgaW4ganNvbigpIGlzIHdoYXQgaXMgYmVpbmcgcmV0dXJuZWQgaW4gdGhlIEhUVFAgUmVzcG9uc2UuIFxuICAgICAgICAgICAgLy8gSW4gdGhpcyBjYXNlIHBhZ2luYXRlZF9jb250ZW50IGlzIHRoZSBlbnRpcmUgcGFnZSBjb250YWluaW5nIGFsbCAjcGFnZSBvZiBvYmplY3RzXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihwYWdpbmF0ZWRfY29udGVudCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAvLyBJbiBjYXNlIG9mIGVycm9yLCByZXR1cm4gc3RhdHVzIDUwMCBhbmQgZXJyb3IgbWVzc2FnZS5cbiAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbihlcnJvcik7XG4gICAgICAgIH0pXG59KTtcblxuLy8gVGhpcyBwYXRoIGVuZHBvaW50IGlzIHVzZWQgdG8gcmV0cmlldmUgYSBjb3Vyc2UgYnkgaXRzIGNvdXJzZV9jb2RlLiBcbi8vIFRoaXMgd2lsbCByZXR1cm4gYSBzaW5nbGUgY291cnNlIG9iamVjdCBpbiBKU09OIGZvcm1hdCBhcyByZXNwb25zZSB0byBhIEdFVCByZXF1ZXN0IG9uIGNvdXJzZV9jb2RlLiBcbi8vIENvdXJzZV9jb2RlIHdvcmtzIGFzIGEga2V5IGluIHRoZSBkYXRhYmFzZSAoaXMgdW5pcXVlIGZvciBhbGwgZG9jdW1lbnRzIGluIHRoZSBjb2xsZWN0aW9uKVxuY291cnNlUm91dGVzLnJvdXRlKCcvOmNvdXJzZV9jb2RlJykuZ2V0KGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGxldCBjb3Vyc2VfY29kZSA9IHJlcS5wYXJhbXMuY291cnNlX2NvZGU7XG4gICAgY291cnNlID0gYXdhaXQgQ291cnNlLmZpbmQoe2NvdXJzZV9jb2RlIDogY291cnNlX2NvZGV9LCAoZXJyLCBjb3Vyc2UpID0+IHtcbiAgICAgICAgcmVzLmpzb24oY291cnNlKTtcbiAgICB9KS5jYXRjaChlcnJvciA9PiByZXMuc3RhdHVzKDUwMCkuanNvbihlcnJvcikpO1xufSk7XG5cblxuLy8gRm9yIHVwZGF0aW5nIHJvd3MgaW4gY29sbGVjdGlvbiB3aXRoIHJldmlld3MgYW5kIHJhdGVkIGRpZmZpY3VsdHkuIFBVVCByZXF1ZXN0cyB0byBpdDI4MTAuMzkuaWRpLm50bnUubm86MzAwMS9jb3Vyc2VzLzxDT1VSU0VfQ09ERT4gd2lsbCB1cGRhdGUgdGhlIGNvdXJzZSBcbi8vIGlmIHRoZSByZXF1ZXN0IGNvbnRhaW5zIGEgcmV2aWV3IEFORCBhIGRpZmZpY3VsdHkuIFxuY291cnNlUm91dGVzLnB1dCgnLzpjb3Vyc2VfY29kZScsIChyZXEsIHJlcykgPT4ge1xuICAgIC8vIGNvbnNvbGUubG9nKHJlcS5ib2R5LmRpZmZpY3VsdHkpXG4gICAgbGV0IGRpZmZpY3VsdHkgPSBwYXJzZUludChyZXEuYm9keS5kaWZmaWN1bHR5KVxuICAgIC8vIEZpbmQgdGhlIGNvcnJlY3QgY291cnNlIGluIHRoZSBEQi4gQ291cnNlX2NvZGUgaXMgYSBwcmltYXJ5IGtleSwgYW5kIHRoZSBzZWFyY2ggd2lsbCBhbHdheXMgcmV0dXJuIG9uZSByZXN1bHQuXG4gICAgbGV0IGNvdXJzZSA9IENvdXJzZS5maW5kKHtjb3Vyc2VfY29kZSA6IHJlcS5wYXJhbXMuY291cnNlX2NvZGV9KVxuICAgIGlmIChyZXEuYm9keS5yZXZpZXcgJiYgNj5kaWZmaWN1bHR5PjApIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2cocmVxLnBhcmFtcy5jb3Vyc2VfY29kZSlcbiAgICAgICAgLy8gRmluZCBkb2N1bWVudCBcImNvdXJzZVwiIGluIGRiIGFuZCBwdXNoIHRoZSByZXZpZXcgdG8gdGhlIHJldmlldyBhcnJheSBvbiB0aGUgZG9jdW1lbnQuIEFsc28gdXBkYXRlIGRpZmZpY3VsdHkgdG8gbmV3IGF2ZXJhZ2UuXG4gICAgICAgIENvdXJzZS5maW5kT25lQW5kVXBkYXRlKGNvdXJzZSwge1wiJHB1c2hcIjogeyBcInJldmlld3NcIjogcmVxLmJvZHkucmV2aWV3IH0sICBcIiRwdXNoXCIgOiB7XCJkaWZmaWN1bHR5XCIgOiBwYXJzZUludChyZXEuYm9keS5kaWZmaWN1bHR5KX19KVxuICAgICAgICAudGhlbihjb3Vyc2UgPT4gcmVzLmpzb24oY291cnNlKSlcbiAgICAgICAgLmNhdGNoKGVyciA9PiByZXMuc3RhdHVzKDUwMCkuanNvbihlcnIpKSAgIFxuICAgIH0gICAgXG59KTtcblxuXG5cblxuZXhwb3J0IGRlZmF1bHQgY291cnNlUm91dGVzO1xuXG5mdW5jdGlvbiBjb250YWluc0NvZGUocXVlcnkpIHtcbiAgbGV0IGNvZGVzID0gXCJ0bWEgdGR0IHR0bSBpdCB0ZnlcIlxuICByZXR1cm4gY29kZXMuaW5jbHVkZXMocXVlcnkudG9Mb3dlckNhc2UoKSlcbn1cblxuXG5mdW5jdGlvbiBhbGxMZXR0ZXJzKHF1ZXJ5KSB7XG4gIGxldCBsZXR0ZXJzID0gL15bQS1aYS16XFxzXSskL1xuICByZXR1cm4gbGV0dGVycy50ZXN0KHF1ZXJ5KVxufVxuXG5mdW5jdGlvbiBjb250YWluc051bWJlcihxdWVyeSkge1xuICBsZXQgbnVtYmVycyA9IC9cXGQvXG4gIHJldHVybiBudW1iZXJzLnRlc3QocXVlcnkpXG59Il19",
    "map": {
      "version": 3,
      "sources": [
        "course.js"
      ],
      "names": [
        "courseRoutes",
        "express",
        "Router",
        "use",
        "req",
        "res",
        "next",
        "header",
        "route",
        "get",
        "content",
        "query",
        "stringQuery",
        "Object",
        "keys",
        "length",
        "filtSort",
        "searchOnly",
        "_id",
        "credits",
        "Number",
        "taught_in_spring",
        "taught_in_autumn",
        "$regex",
        "RegExp",
        "$options",
        "learning_goal",
        "allLetters",
        "containsCode",
        "course_code",
        "norwegian_name",
        "containsNumber",
        "courses",
        "Course",
        "find",
        "err",
        "catch",
        "console",
        "log",
        "sorting",
        "order",
        "page",
        "pages",
        "parseInt",
        "limit",
        "lim",
        "paginate",
        "sort",
        "then",
        "paginated_content",
        "status",
        "json",
        "error",
        "params",
        "course",
        "put",
        "difficulty",
        "body",
        "review",
        "findOneAndUpdate",
        "codes",
        "includes",
        "toLowerCase",
        "letters",
        "test",
        "numbers"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes",
      "sourcesContent": [
        "import express from 'express';\nimport cors from 'cors';\nimport Course from '../models/course.model';\nimport { model } from 'mongoose';\nimport { clearScreenDown } from 'readline';\n\n// TODO: Add catch blocks for all functions to handle warnings in the console.\n\nconst courseRoutes = express.Router()\n\n// Cross-Origin Resource Sharing (CORS). Used to specify what type of requests is allowed, who may send requests and what header-types. \n// CORS works by adding new HTTP headers that let servers describe which origins are permitted to read information from a web browser.\ncourseRoutes.use(cors());\n  // Allow client to fetch data\n  courseRoutes.use(function(req, res, next) {\n    res.header('Access-Control-Allow-Origin', '*'); // Can change * to allow request from specific clients. In this project we dont care to handle security issues.\n    res.header('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n      res.header('Access-Control-Allow-Methods', 'GET, PUT'); // We only allow GET and PUT requests. On purpose, we decided to not have any functionality to add courses, neither delete them.\n      next();\n});\n\n// The function passed into the get function handles all GET requests sent to it2810-39.idi.ntnu.no:<PORT-NUMBER>/courses \n// Further on, we're calling Course.find to get a list of all course items from the MongoDB. The find function takes one argument, a callback function\n// which is executed once the result is available. All results available in courses are added in JSON format to the response by calling res.json(courses).\ncourseRoutes.route('/').get(async function(req, res) {\n    \n\n    // Saving all possible attributes for a course document in the collection in content object. \n    // Checks if attribute exists on req.query and saves it if it exists.\n    let content = {};\n    const query = await req.query;\n    var stringQuery = Object.keys(query)[0] //This will be the input the user writes in the search bar\n\n    //Checks if there are any sort/filter specifications the query other than the key words\n    Object.keys(query).length > 1 ? ( delete query[stringQuery], filtSort(query)) : searchOnly(stringQuery)\n   \n  \n    //Makes query from user chosen filtering/sorting\n    function filtSort(query) {\n\n      if (query._id) { content._id = query._id } \n      if (query.credits) { content.credits = Number(query.credits)}\n      if (query.taught_in_spring) { content.taught_in_spring = true} \n      if (query.taught_in_autumn) { content.taught_in_autumn = true} \n      if (query.content) { content.content = {$regex: RegExp(query.content), $options:'-i'}}\n      if (query.learning_goal) { content.learning_goal = {$regex: RegExp(query.learning_goal), $options:'-i'}}\n\n      //Have to make the search as well, in addition to the sorting/filtering\n      searchOnly(stringQuery)\n    }\n  \n    //Only handles input from written in search bar in GUI. User only searches for norwegian_name or course_code\n    function searchOnly(stringQuery) {\n      if(allLetters(stringQuery)) {\n        containsCode(stringQuery) ? content.course_code = {$regex: RegExp(stringQuery), $options:'-i'} : \n                                    content.norwegian_name = {$regex : RegExp(stringQuery), $options:'-i'}\n      }\n      else if (containsNumber(stringQuery)) {\n        content.course_code = {$regex: RegExp(stringQuery), $options:'-i'}\n      }\n    }\n    \n\n    const courses = await Course.find((content), function(err, courses) {}).catch(err => console.log(err));\n    \n    // Values retrieved by the query, else set to default values. Used in pagination and sorting of results.\n    let sorting = req.query.sorting ? req.query.sorting: 'norwegian_name';\n    let order = req.query.order ? req.query.order : '1';\n    let page = req.query.page ? req.query.page : 1;\n    let pages=parseInt(page);\n    let limit = req.query.limit ? req.query.limit : 10;\n    let lim=parseInt(limit);\n    // console.log(content)\n\n    // Uses mongoose-paginate to paginate results. Plugin in imported in the course.model.js. Response to client is sent in this function. \n    // Takes to arguments. One content object, and one object containing pages, page limit and what to sort by.\n    // To go to next page of query results, add &page=<page_number> to the end of the query.\n    // Sorts by norwegian name unless sorting is specified in the query in ascending order (order : 1, use -1 for descending).\n    // Sorting and order may also be added to the query &sorting=course_code&order=-1.\n    // console.log(\"Content: \", content)\n    Course.paginate(content,\n        {   page: pages,\n            limit: lim,\n            sort: {[sorting]:[order]}\n        })\n        .then(paginated_content => {\n            // The content in json() is what is being returned in the HTTP Response. \n            // In this case paginated_content is the entire page containing all #page of objects\n            res.status(200).json(paginated_content);\n        })\n        .catch(error => {\n            // In case of error, return status 500 and error message.\n          res.status(500).json(error);\n        })\n});\n\n// This path endpoint is used to retrieve a course by its course_code. \n// This will return a single course object in JSON format as response to a GET request on course_code. \n// Course_code works as a key in the database (is unique for all documents in the collection)\ncourseRoutes.route('/:course_code').get(async (req, res) => {\n    let course_code = req.params.course_code;\n    course = await Course.find({course_code : course_code}, (err, course) => {\n        res.json(course);\n    }).catch(error => res.status(500).json(error));\n});\n\n\n// For updating rows in collection with reviews and rated difficulty. PUT requests to it2810.39.idi.ntnu.no:3001/courses/<COURSE_CODE> will update the course \n// if the request contains a review AND a difficulty. \ncourseRoutes.put('/:course_code', (req, res) => {\n    // console.log(req.body.difficulty)\n    let difficulty = parseInt(req.body.difficulty)\n    // Find the correct course in the DB. Course_code is a primary key, and the search will always return one result.\n    let course = Course.find({course_code : req.params.course_code})\n    if (req.body.review && 6>difficulty>0) {\n        // console.log(req.params.course_code)\n        // Find document \"course\" in db and push the review to the review array on the document. Also update difficulty to new average.\n        Course.findOneAndUpdate(course, {\"$push\": { \"reviews\": req.body.review },  \"$push\" : {\"difficulty\" : parseInt(req.body.difficulty)}})\n        .then(course => res.json(course))\n        .catch(err => res.status(500).json(err))   \n    }    \n});\n\n\n\n\nexport default courseRoutes;\n\nfunction containsCode(query) {\n  let codes = \"tma tdt ttm it tfy\"\n  return codes.includes(query.toLowerCase())\n}\n\n\nfunction allLetters(query) {\n  let letters = /^[A-Za-z\\s]+$/\n  return letters.test(query)\n}\n\nfunction containsNumber(query) {\n  let numbers = /\\d/\n  return numbers.test(query)\n}"
      ]
    },
    "sourceType": "script",
    "mtime": 1571743189379
  },
  "{\"sourceRoot\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/models\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend\",\"filename\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/models/course.model.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend\",\"plugins\":[{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\"./src\"]}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"corejs2-usage\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null],\"exit\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"corejs\":{\"options\":{\"loose\":false,\"includePrerelease\":false},\"loose\":false,\"raw\":\"2.0.0\",\"major\":2,\"minor\":0,\"patch\":0,\"prerelease\":[],\"build\":[],\"version\":\"2.0.0\"},\"polyfillTargets\":{\"node\":\"10.15.3\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"regenerator\":false,\"debug\":false}}],\"presets\":[]}:7.6.4": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/models",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend",
      "filename": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/models/course.model.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "./src"
            ]
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "corejs2-usage",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "Program": {
              "enter": [
                null
              ]
            },
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "YieldExpression": {
              "enter": [
                null
              ]
            },
            "MemberExpression": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "VariableDeclarator": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true,
            "Identifier": {
              "enter": [
                null
              ]
            },
            "JSXIdentifier": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "corejs": {
              "options": {
                "loose": false,
                "includePrerelease": false
              },
              "loose": false,
              "raw": "2.0.0",
              "major": 2,
              "minor": 0,
              "patch": 0,
              "prerelease": [],
              "build": [],
              "version": "2.0.0"
            },
            "polyfillTargets": {
              "node": "10.15.3"
            },
            "include": {},
            "exclude": {},
            "proposals": false,
            "shippedProposals": false,
            "regenerator": false,
            "debug": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/models/course.model.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/models/course.model.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/models",
        "sourceFileName": "course.model.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _mongoosePaginate = _interopRequireDefault(require(\"mongoose-paginate\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// This file is a representation of the docs in the collection courses. \n// We have used Mongoose, which is a ODM (Object Data Modeling) library for MongoDB. \n// Mongoose manages relationships between data and translates between objects in code and the objects in MongoDB.\nconst Schema = _mongoose.default.Schema;\nlet Course = new Schema({\n  norwegian_name: {\n    type: String\n  },\n  course_code: {\n    type: String\n  },\n  credit: {\n    type: Number\n  },\n  taught_in_spring: {\n    type: Boolean\n  },\n  taught_in_autumn: {\n    type: Boolean\n  },\n  content: {\n    type: String\n  },\n  learning_goal: {\n    type: String\n  },\n  reviews: {\n    type: Array\n  },\n  difficulty: {\n    type: Array\n  }\n}, // Specifying the name of the collection in MongoDB\n{\n  collection: 'courses'\n}); // mongoose-paginate is used to paginate query results. Pagination is imported and activated in this file, but used in routes/course.js\n\nCourse.plugin(_mongoosePaginate.default);\nmodule.exports = _mongoose.default.model('Course', Course);\nvar _default = Course;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvdXJzZS5tb2RlbC5qcyJdLCJuYW1lcyI6WyJTY2hlbWEiLCJtb25nb29zZSIsIkNvdXJzZSIsIm5vcndlZ2lhbl9uYW1lIiwidHlwZSIsIlN0cmluZyIsImNvdXJzZV9jb2RlIiwiY3JlZGl0IiwiTnVtYmVyIiwidGF1Z2h0X2luX3NwcmluZyIsIkJvb2xlYW4iLCJ0YXVnaHRfaW5fYXV0dW1uIiwiY29udGVudCIsImxlYXJuaW5nX2dvYWwiLCJyZXZpZXdzIiwiQXJyYXkiLCJkaWZmaWN1bHR5IiwiY29sbGVjdGlvbiIsInBsdWdpbiIsIm1vbmdvb3NlUGFnaW5hdGUiLCJtb2R1bGUiLCJleHBvcnRzIiwibW9kZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUdBO0FBQ0E7QUFDQTtBQUVBLE1BQU1BLE1BQU0sR0FBR0Msa0JBQVNELE1BQXhCO0FBRUEsSUFBSUUsTUFBTSxHQUFHLElBQUlGLE1BQUosQ0FBVztBQUNwQkcsRUFBQUEsY0FBYyxFQUFFO0FBQ1pDLElBQUFBLElBQUksRUFBRUM7QUFETSxHQURJO0FBSXBCQyxFQUFBQSxXQUFXLEVBQUc7QUFDVkYsSUFBQUEsSUFBSSxFQUFFQztBQURJLEdBSk07QUFPcEJFLEVBQUFBLE1BQU0sRUFBRTtBQUNKSCxJQUFBQSxJQUFJLEVBQUVJO0FBREYsR0FQWTtBQVVwQkMsRUFBQUEsZ0JBQWdCLEVBQUU7QUFDZEwsSUFBQUEsSUFBSSxFQUFFTTtBQURRLEdBVkU7QUFhcEJDLEVBQUFBLGdCQUFnQixFQUFFO0FBQ2RQLElBQUFBLElBQUksRUFBRU07QUFEUSxHQWJFO0FBZ0JwQkUsRUFBQUEsT0FBTyxFQUFFO0FBQ0xSLElBQUFBLElBQUksRUFBRUM7QUFERCxHQWhCVztBQW1CcEJRLEVBQUFBLGFBQWEsRUFBRTtBQUNYVCxJQUFBQSxJQUFJLEVBQUVDO0FBREssR0FuQks7QUFzQnBCUyxFQUFBQSxPQUFPLEVBQUU7QUFDTFYsSUFBQUEsSUFBSSxFQUFFVztBQURELEdBdEJXO0FBeUJwQkMsRUFBQUEsVUFBVSxFQUFFO0FBQ1JaLElBQUFBLElBQUksRUFBRVc7QUFERTtBQXpCUSxDQUFYLEVBOEJUO0FBQ0E7QUFBRUUsRUFBQUEsVUFBVSxFQUFHO0FBQWYsQ0EvQlMsQ0FBYixDLENBa0NBOztBQUNBZixNQUFNLENBQUNnQixNQUFQLENBQWNDLHlCQUFkO0FBR0FDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQnBCLGtCQUFTcUIsS0FBVCxDQUFlLFFBQWYsRUFBeUJwQixNQUF6QixDQUFqQjtlQUVlQSxNIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9WaWN0b3IvRG9jdW1lbnRzL05UTlUvSDIwMTkvV2VidXR2aWtsaW5nL3Byb3NqZWt0XzMvYmFja2VuZC9tb2RlbHMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5pbXBvcnQgbW9uZ29vc2VQYWdpbmF0ZSBmcm9tICdtb25nb29zZS1wYWdpbmF0ZSc7XG5cblxuLy8gVGhpcyBmaWxlIGlzIGEgcmVwcmVzZW50YXRpb24gb2YgdGhlIGRvY3MgaW4gdGhlIGNvbGxlY3Rpb24gY291cnNlcy4gXG4vLyBXZSBoYXZlIHVzZWQgTW9uZ29vc2UsIHdoaWNoIGlzIGEgT0RNIChPYmplY3QgRGF0YSBNb2RlbGluZykgbGlicmFyeSBmb3IgTW9uZ29EQi4gXG4vLyBNb25nb29zZSBtYW5hZ2VzIHJlbGF0aW9uc2hpcHMgYmV0d2VlbiBkYXRhIGFuZCB0cmFuc2xhdGVzIGJldHdlZW4gb2JqZWN0cyBpbiBjb2RlIGFuZCB0aGUgb2JqZWN0cyBpbiBNb25nb0RCLlxuXG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XG5cbmxldCBDb3Vyc2UgPSBuZXcgU2NoZW1hKHtcbiAgICBub3J3ZWdpYW5fbmFtZToge1xuICAgICAgICB0eXBlOiBTdHJpbmdcbiAgICB9LFxuICAgIGNvdXJzZV9jb2RlIDoge1xuICAgICAgICB0eXBlOiBTdHJpbmdcbiAgICB9LFxuICAgIGNyZWRpdDoge1xuICAgICAgICB0eXBlOiBOdW1iZXJcbiAgICB9LFxuICAgIHRhdWdodF9pbl9zcHJpbmc6IHtcbiAgICAgICAgdHlwZTogQm9vbGVhblxuICAgIH0sXG4gICAgdGF1Z2h0X2luX2F1dHVtbjoge1xuICAgICAgICB0eXBlOiBCb29sZWFuXG4gICAgfSxcbiAgICBjb250ZW50OiB7XG4gICAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0sXG4gICAgbGVhcm5pbmdfZ29hbDoge1xuICAgICAgICB0eXBlOiBTdHJpbmdcbiAgICB9LFxuICAgIHJldmlld3M6IHtcbiAgICAgICAgdHlwZTogQXJyYXlcbiAgICB9LFxuICAgIGRpZmZpY3VsdHk6IHtcbiAgICAgICAgdHlwZTogQXJyYXlcbiAgICB9XG4gICAgfSxcblxuICAgIC8vIFNwZWNpZnlpbmcgdGhlIG5hbWUgb2YgdGhlIGNvbGxlY3Rpb24gaW4gTW9uZ29EQlxuICAgIHsgY29sbGVjdGlvbiA6ICdjb3Vyc2VzJ31cbilcblxuLy8gbW9uZ29vc2UtcGFnaW5hdGUgaXMgdXNlZCB0byBwYWdpbmF0ZSBxdWVyeSByZXN1bHRzLiBQYWdpbmF0aW9uIGlzIGltcG9ydGVkIGFuZCBhY3RpdmF0ZWQgaW4gdGhpcyBmaWxlLCBidXQgdXNlZCBpbiByb3V0ZXMvY291cnNlLmpzXG5Db3Vyc2UucGx1Z2luKG1vbmdvb3NlUGFnaW5hdGUpO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gbW9uZ29vc2UubW9kZWwoJ0NvdXJzZScsIENvdXJzZSk7XG5cbmV4cG9ydCBkZWZhdWx0IENvdXJzZTsiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "course.model.js"
      ],
      "names": [
        "Schema",
        "mongoose",
        "Course",
        "norwegian_name",
        "type",
        "String",
        "course_code",
        "credit",
        "Number",
        "taught_in_spring",
        "Boolean",
        "taught_in_autumn",
        "content",
        "learning_goal",
        "reviews",
        "Array",
        "difficulty",
        "collection",
        "plugin",
        "mongoosePaginate",
        "module",
        "exports",
        "model"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAGA;AACA;AACA;AAEA,MAAMA,MAAM,GAAGC,kBAASD,MAAxB;AAEA,IAAIE,MAAM,GAAG,IAAIF,MAAJ,CAAW;AACpBG,EAAAA,cAAc,EAAE;AACZC,IAAAA,IAAI,EAAEC;AADM,GADI;AAIpBC,EAAAA,WAAW,EAAG;AACVF,IAAAA,IAAI,EAAEC;AADI,GAJM;AAOpBE,EAAAA,MAAM,EAAE;AACJH,IAAAA,IAAI,EAAEI;AADF,GAPY;AAUpBC,EAAAA,gBAAgB,EAAE;AACdL,IAAAA,IAAI,EAAEM;AADQ,GAVE;AAapBC,EAAAA,gBAAgB,EAAE;AACdP,IAAAA,IAAI,EAAEM;AADQ,GAbE;AAgBpBE,EAAAA,OAAO,EAAE;AACLR,IAAAA,IAAI,EAAEC;AADD,GAhBW;AAmBpBQ,EAAAA,aAAa,EAAE;AACXT,IAAAA,IAAI,EAAEC;AADK,GAnBK;AAsBpBS,EAAAA,OAAO,EAAE;AACLV,IAAAA,IAAI,EAAEW;AADD,GAtBW;AAyBpBC,EAAAA,UAAU,EAAE;AACRZ,IAAAA,IAAI,EAAEW;AADE;AAzBQ,CAAX,EA8BT;AACA;AAAEE,EAAAA,UAAU,EAAG;AAAf,CA/BS,CAAb,C,CAkCA;;AACAf,MAAM,CAACgB,MAAP,CAAcC,yBAAd;AAGAC,MAAM,CAACC,OAAP,GAAiBpB,kBAASqB,KAAT,CAAe,QAAf,EAAyBpB,MAAzB,CAAjB;eAEeA,M",
      "sourceRoot": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/models",
      "sourcesContent": [
        "import mongoose from \"mongoose\";\nimport mongoosePaginate from 'mongoose-paginate';\n\n\n// This file is a representation of the docs in the collection courses. \n// We have used Mongoose, which is a ODM (Object Data Modeling) library for MongoDB. \n// Mongoose manages relationships between data and translates between objects in code and the objects in MongoDB.\n\nconst Schema = mongoose.Schema;\n\nlet Course = new Schema({\n    norwegian_name: {\n        type: String\n    },\n    course_code : {\n        type: String\n    },\n    credit: {\n        type: Number\n    },\n    taught_in_spring: {\n        type: Boolean\n    },\n    taught_in_autumn: {\n        type: Boolean\n    },\n    content: {\n        type: String\n    },\n    learning_goal: {\n        type: String\n    },\n    reviews: {\n        type: Array\n    },\n    difficulty: {\n        type: Array\n    }\n    },\n\n    // Specifying the name of the collection in MongoDB\n    { collection : 'courses'}\n)\n\n// mongoose-paginate is used to paginate query results. Pagination is imported and activated in this file, but used in routes/course.js\nCourse.plugin(mongoosePaginate);\n\n\nmodule.exports = mongoose.model('Course', Course);\n\nexport default Course;"
      ]
    },
    "sourceType": "script",
    "mtime": 1571743148115
  },
  "{\"sourceRoot\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend\",\"filename\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes/grades.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend\",\"plugins\":[{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\"./src\"]}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"corejs2-usage\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null],\"exit\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"corejs\":{\"options\":{\"loose\":false,\"includePrerelease\":false},\"loose\":false,\"raw\":\"2.0.0\",\"major\":2,\"minor\":0,\"patch\":0,\"prerelease\":[],\"build\":[],\"version\":\"2.0.0\"},\"polyfillTargets\":{\"node\":\"10.15.3\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"regenerator\":false,\"debug\":false}}],\"presets\":[]}:7.6.4": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend",
      "filename": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes/grades.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "./src"
            ]
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "corejs2-usage",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "Program": {
              "enter": [
                null
              ]
            },
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "YieldExpression": {
              "enter": [
                null
              ]
            },
            "MemberExpression": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "VariableDeclarator": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true,
            "Identifier": {
              "enter": [
                null
              ]
            },
            "JSXIdentifier": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "corejs": {
              "options": {
                "loose": false,
                "includePrerelease": false
              },
              "loose": false,
              "raw": "2.0.0",
              "major": 2,
              "minor": 0,
              "patch": 0,
              "prerelease": [],
              "build": [],
              "version": "2.0.0"
            },
            "polyfillTargets": {
              "node": "10.15.3"
            },
            "include": {},
            "exclude": {},
            "proposals": false,
            "shippedProposals": false,
            "regenerator": false,
            "debug": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes/grades.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes/grades.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes",
        "sourceFileName": "grades.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _grades = _interopRequireDefault(require(\"../models/grades.model\"));\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst gradeRoutes = _express.default.Router(); // Cross-Origin Resource Sharing (CORS). Used to specify what type of requests is allowed, who may send requests and what header-types. \n// CORS works by adding new HTTP headers that let servers describe which origins are permitted to read information from a web browser.\n\n\ngradeRoutes.use((0, _cors.default)()); // Allow client to fetch data\n\ngradeRoutes.use(function (req, res, next) {\n  res.header('Access-Control-Allow-Origin', '*'); // Can change * to allow request from specific clients\n\n  res.header('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n  res.header('Access-Control-Allow-Methods', 'GET, PUT'); // We only allow GET and PUT requests. \n\n  next();\n}); // The function passed into the get function handles all GET requests sent to /grades \n// Further on, we're calling Grades.find to get a list of all course items from the MongoDB. The find function takes one argument, a callback function\n// which is executed once the result is available. All results available in courses are added in JSON format to the response by calling res.json(courses).\n\ngradeRoutes.route('/').get(async function (req, res) {\n  let sorting = req.query.sorting ? req.query.sorting : 'semester_code';\n  let order = req.query.order ? req.query.order : '1'; // Ascending order unless else is specified\n\n  let page = req.query.page ? req.query.page : 1;\n  let pages = parseInt(page);\n  let limit = req.query.limit ? req.query.limit : 10;\n  let lim = parseInt(limit); // Initiate an empty content object to save possible attributes for a grade document in the collection in content object\n\n  let content = {}; // Access course_code from URL by splitting on / and selecting the 3rd element. Will work for every possible state in this project.\n\n  content.course_code = req.baseUrl.split('/')[2]; // if (query.course_code) { content.course_code = {$regex : RegExp(query.course_code), $options:'-i'} }\n  // The content object being send into find is of the form e.g., {course_code = \"TDT4140\"}\n\n  const grades = await _grades.default.find(content); // Uses mongoose-paginate to paginate results. Plugin in imported in the course.model.js. Response to client is sent in this function. \n  // Takes to arguments. One content object, and one object containing pages, page limit and what to sort by.\n  // To go to next page of query results, add &page=<page_number> to the end of the query.\n  // Sorts by norwegian name unless sorting is specified in the query in ascending order (order : 1, use -1 for descending).\n  // Sorting and order may also be added to the query &sorting=course_code&order=-1.\n\n  _grades.default.paginate(grades[0], {\n    page: pages,\n    limit: lim,\n    sort: {\n      [sorting]: [order]\n    }\n  }).then(page => {\n    res.json(page);\n  }).catch(err => {\n    res.status(500).json(err);\n  });\n}); // Makes it possible to go directly to the semesters of a course object by visiting it2810-39.idi.ntnu.no:3001/grades/TDT4110.\n// Will only return semesters for this specific course code. \n\ngradeRoutes.route('/:course_code').get(async function (req, res) {\n  let course_code = req.params.course_code;\n  const grades = await _grades.default.find({\n    course_code: course_code\n  }, function (err, grades) {\n    res.json(grades);\n  });\n  res.status(200).json(grades).send();\n});\nvar _default = gradeRoutes; // Format for sprringer:\n// http://localhost:3001/grades?course_code=TDT4110&semesters.semester_code=H2018\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdyYWRlcy5qcyJdLCJuYW1lcyI6WyJncmFkZVJvdXRlcyIsImV4cHJlc3MiLCJSb3V0ZXIiLCJ1c2UiLCJyZXEiLCJyZXMiLCJuZXh0IiwiaGVhZGVyIiwicm91dGUiLCJnZXQiLCJzb3J0aW5nIiwicXVlcnkiLCJvcmRlciIsInBhZ2UiLCJwYWdlcyIsInBhcnNlSW50IiwibGltaXQiLCJsaW0iLCJjb250ZW50IiwiY291cnNlX2NvZGUiLCJiYXNlVXJsIiwic3BsaXQiLCJncmFkZXMiLCJHcmFkZSIsImZpbmQiLCJwYWdpbmF0ZSIsInNvcnQiLCJ0aGVuIiwianNvbiIsImNhdGNoIiwiZXJyIiwic3RhdHVzIiwicGFyYW1zIiwic2VuZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsV0FBVyxHQUFHQyxpQkFBUUMsTUFBUixFQUFwQixDLENBRUE7QUFDQTs7O0FBQ0FGLFdBQVcsQ0FBQ0csR0FBWixDQUFnQixvQkFBaEIsRSxDQUNFOztBQUNBSCxXQUFXLENBQUNHLEdBQVosQ0FBZ0IsVUFBU0MsR0FBVCxFQUFjQyxHQUFkLEVBQW1CQyxJQUFuQixFQUF5QjtBQUN2Q0QsRUFBQUEsR0FBRyxDQUFDRSxNQUFKLENBQVcsNkJBQVgsRUFBMEMsR0FBMUMsRUFEdUMsQ0FDUzs7QUFDaERGLEVBQUFBLEdBQUcsQ0FBQ0UsTUFBSixDQUFXLDhCQUFYLEVBQTJDLGdEQUEzQztBQUNFRixFQUFBQSxHQUFHLENBQUNFLE1BQUosQ0FBVyw4QkFBWCxFQUEyQyxVQUEzQyxFQUhxQyxDQUdtQjs7QUFDeERELEVBQUFBLElBQUk7QUFDVCxDQUxDLEUsQ0FPRjtBQUNBO0FBQ0E7O0FBQ0FOLFdBQVcsQ0FBQ1EsS0FBWixDQUFrQixHQUFsQixFQUF1QkMsR0FBdkIsQ0FBMkIsZ0JBQWVMLEdBQWYsRUFBb0JDLEdBQXBCLEVBQXlCO0FBQ2hELE1BQUlLLE9BQU8sR0FBR04sR0FBRyxDQUFDTyxLQUFKLENBQVVELE9BQVYsR0FBb0JOLEdBQUcsQ0FBQ08sS0FBSixDQUFVRCxPQUE5QixHQUF1QyxlQUFyRDtBQUNBLE1BQUlFLEtBQUssR0FBR1IsR0FBRyxDQUFDTyxLQUFKLENBQVVDLEtBQVYsR0FBa0JSLEdBQUcsQ0FBQ08sS0FBSixDQUFVQyxLQUE1QixHQUFvQyxHQUFoRCxDQUZnRCxDQUVLOztBQUNyRCxNQUFJQyxJQUFJLEdBQUdULEdBQUcsQ0FBQ08sS0FBSixDQUFVRSxJQUFWLEdBQWlCVCxHQUFHLENBQUNPLEtBQUosQ0FBVUUsSUFBM0IsR0FBa0MsQ0FBN0M7QUFDQSxNQUFJQyxLQUFLLEdBQUNDLFFBQVEsQ0FBQ0YsSUFBRCxDQUFsQjtBQUNBLE1BQUlHLEtBQUssR0FBR1osR0FBRyxDQUFDTyxLQUFKLENBQVVLLEtBQVYsR0FBa0JaLEdBQUcsQ0FBQ08sS0FBSixDQUFVSyxLQUE1QixHQUFvQyxFQUFoRDtBQUNBLE1BQUlDLEdBQUcsR0FBQ0YsUUFBUSxDQUFDQyxLQUFELENBQWhCLENBTmdELENBUWhEOztBQUNBLE1BQUlFLE9BQU8sR0FBRyxFQUFkLENBVGdELENBVWhEOztBQUNBQSxFQUFBQSxPQUFPLENBQUNDLFdBQVIsR0FBc0JmLEdBQUcsQ0FBQ2dCLE9BQUosQ0FBWUMsS0FBWixDQUFrQixHQUFsQixFQUF1QixDQUF2QixDQUF0QixDQVhnRCxDQVloRDtBQUdBOztBQUNBLFFBQU1DLE1BQU0sR0FBRyxNQUFNQyxnQkFBTUMsSUFBTixDQUFXTixPQUFYLENBQXJCLENBaEJnRCxDQWtCaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQUssa0JBQU1FLFFBQU4sQ0FBZUgsTUFBTSxDQUFDLENBQUQsQ0FBckIsRUFBeUI7QUFDckJULElBQUFBLElBQUksRUFBRUMsS0FEZTtBQUVyQkUsSUFBQUEsS0FBSyxFQUFFQyxHQUZjO0FBR3JCUyxJQUFBQSxJQUFJLEVBQUU7QUFBQyxPQUFDaEIsT0FBRCxHQUFVLENBQUNFLEtBQUQ7QUFBWDtBQUhlLEdBQXpCLEVBS0tlLElBTEwsQ0FLVWQsSUFBSSxJQUFJO0FBQ2RSLElBQUFBLEdBQUcsQ0FBQ3VCLElBQUosQ0FBU2YsSUFBVDtBQUNELEdBUEgsRUFRS2dCLEtBUkwsQ0FRV0MsR0FBRyxJQUFJO0FBQ1p6QixJQUFBQSxHQUFHLENBQUMwQixNQUFKLENBQVcsR0FBWCxFQUFnQkgsSUFBaEIsQ0FBcUJFLEdBQXJCO0FBQ0QsR0FWTDtBQVdILENBbENELEUsQ0FxQ0E7QUFDQTs7QUFDQTlCLFdBQVcsQ0FBQ1EsS0FBWixDQUFrQixlQUFsQixFQUFtQ0MsR0FBbkMsQ0FBdUMsZ0JBQWVMLEdBQWYsRUFBb0JDLEdBQXBCLEVBQXlCO0FBQzVELE1BQUljLFdBQVcsR0FBR2YsR0FBRyxDQUFDNEIsTUFBSixDQUFXYixXQUE3QjtBQUNBLFFBQU1HLE1BQU0sR0FBRyxNQUFNQyxnQkFBTUMsSUFBTixDQUFXO0FBQUNMLElBQUFBLFdBQVcsRUFBR0E7QUFBZixHQUFYLEVBQXdDLFVBQVNXLEdBQVQsRUFBY1IsTUFBZCxFQUFzQjtBQUMvRWpCLElBQUFBLEdBQUcsQ0FBQ3VCLElBQUosQ0FBU04sTUFBVDtBQUNILEdBRm9CLENBQXJCO0FBR0FqQixFQUFBQSxHQUFHLENBQUMwQixNQUFKLENBQVcsR0FBWCxFQUFnQkgsSUFBaEIsQ0FBcUJOLE1BQXJCLEVBQTZCVyxJQUE3QjtBQUNILENBTkQ7ZUFRZWpDLFcsRUFFZjtBQUNBIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9WaWN0b3IvRG9jdW1lbnRzL05UTlUvSDIwMTkvV2VidXR2aWtsaW5nL3Byb3NqZWt0XzMvYmFja2VuZC9yb3V0ZXMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgR3JhZGUgZnJvbSAnLi4vbW9kZWxzL2dyYWRlcy5tb2RlbCdcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5cbmNvbnN0IGdyYWRlUm91dGVzID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuLy8gQ3Jvc3MtT3JpZ2luIFJlc291cmNlIFNoYXJpbmcgKENPUlMpLiBVc2VkIHRvIHNwZWNpZnkgd2hhdCB0eXBlIG9mIHJlcXVlc3RzIGlzIGFsbG93ZWQsIHdobyBtYXkgc2VuZCByZXF1ZXN0cyBhbmQgd2hhdCBoZWFkZXItdHlwZXMuIFxuLy8gQ09SUyB3b3JrcyBieSBhZGRpbmcgbmV3IEhUVFAgaGVhZGVycyB0aGF0IGxldCBzZXJ2ZXJzIGRlc2NyaWJlIHdoaWNoIG9yaWdpbnMgYXJlIHBlcm1pdHRlZCB0byByZWFkIGluZm9ybWF0aW9uIGZyb20gYSB3ZWIgYnJvd3Nlci5cbmdyYWRlUm91dGVzLnVzZShjb3JzKCkpO1xuICAvLyBBbGxvdyBjbGllbnQgdG8gZmV0Y2ggZGF0YVxuICBncmFkZVJvdXRlcy51c2UoZnVuY3Rpb24ocmVxLCByZXMsIG5leHQpIHtcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCAnKicpOyAvLyBDYW4gY2hhbmdlICogdG8gYWxsb3cgcmVxdWVzdCBmcm9tIHNwZWNpZmljIGNsaWVudHNcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ09yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQnKTtcbiAgICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULCBQVVQnKTsgLy8gV2Ugb25seSBhbGxvdyBHRVQgYW5kIFBVVCByZXF1ZXN0cy4gXG4gICAgICBuZXh0KCk7XG59KTtcblxuLy8gVGhlIGZ1bmN0aW9uIHBhc3NlZCBpbnRvIHRoZSBnZXQgZnVuY3Rpb24gaGFuZGxlcyBhbGwgR0VUIHJlcXVlc3RzIHNlbnQgdG8gL2dyYWRlcyBcbi8vIEZ1cnRoZXIgb24sIHdlJ3JlIGNhbGxpbmcgR3JhZGVzLmZpbmQgdG8gZ2V0IGEgbGlzdCBvZiBhbGwgY291cnNlIGl0ZW1zIGZyb20gdGhlIE1vbmdvREIuIFRoZSBmaW5kIGZ1bmN0aW9uIHRha2VzIG9uZSBhcmd1bWVudCwgYSBjYWxsYmFjayBmdW5jdGlvblxuLy8gd2hpY2ggaXMgZXhlY3V0ZWQgb25jZSB0aGUgcmVzdWx0IGlzIGF2YWlsYWJsZS4gQWxsIHJlc3VsdHMgYXZhaWxhYmxlIGluIGNvdXJzZXMgYXJlIGFkZGVkIGluIEpTT04gZm9ybWF0IHRvIHRoZSByZXNwb25zZSBieSBjYWxsaW5nIHJlcy5qc29uKGNvdXJzZXMpLlxuZ3JhZGVSb3V0ZXMucm91dGUoJy8nKS5nZXQoYXN5bmMgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgICBsZXQgc29ydGluZyA9IHJlcS5xdWVyeS5zb3J0aW5nID8gcmVxLnF1ZXJ5LnNvcnRpbmc6ICdzZW1lc3Rlcl9jb2RlJztcbiAgICBsZXQgb3JkZXIgPSByZXEucXVlcnkub3JkZXIgPyByZXEucXVlcnkub3JkZXIgOiAnMSc7IC8vIEFzY2VuZGluZyBvcmRlciB1bmxlc3MgZWxzZSBpcyBzcGVjaWZpZWRcbiAgICBsZXQgcGFnZSA9IHJlcS5xdWVyeS5wYWdlID8gcmVxLnF1ZXJ5LnBhZ2UgOiAxO1xuICAgIGxldCBwYWdlcz1wYXJzZUludChwYWdlKTtcbiAgICBsZXQgbGltaXQgPSByZXEucXVlcnkubGltaXQgPyByZXEucXVlcnkubGltaXQgOiAxMDtcbiAgICBsZXQgbGltPXBhcnNlSW50KGxpbWl0KTtcbiAgICBcbiAgICAvLyBJbml0aWF0ZSBhbiBlbXB0eSBjb250ZW50IG9iamVjdCB0byBzYXZlIHBvc3NpYmxlIGF0dHJpYnV0ZXMgZm9yIGEgZ3JhZGUgZG9jdW1lbnQgaW4gdGhlIGNvbGxlY3Rpb24gaW4gY29udGVudCBvYmplY3RcbiAgICBsZXQgY29udGVudCA9IHt9O1xuICAgIC8vIEFjY2VzcyBjb3Vyc2VfY29kZSBmcm9tIFVSTCBieSBzcGxpdHRpbmcgb24gLyBhbmQgc2VsZWN0aW5nIHRoZSAzcmQgZWxlbWVudC4gV2lsbCB3b3JrIGZvciBldmVyeSBwb3NzaWJsZSBzdGF0ZSBpbiB0aGlzIHByb2plY3QuXG4gICAgY29udGVudC5jb3Vyc2VfY29kZSA9IHJlcS5iYXNlVXJsLnNwbGl0KCcvJylbMl1cbiAgICAvLyBpZiAocXVlcnkuY291cnNlX2NvZGUpIHsgY29udGVudC5jb3Vyc2VfY29kZSA9IHskcmVnZXggOiBSZWdFeHAocXVlcnkuY291cnNlX2NvZGUpLCAkb3B0aW9uczonLWknfSB9XG5cbiAgICBcbiAgICAvLyBUaGUgY29udGVudCBvYmplY3QgYmVpbmcgc2VuZCBpbnRvIGZpbmQgaXMgb2YgdGhlIGZvcm0gZS5nLiwge2NvdXJzZV9jb2RlID0gXCJURFQ0MTQwXCJ9XG4gICAgY29uc3QgZ3JhZGVzID0gYXdhaXQgR3JhZGUuZmluZChjb250ZW50KTtcblxuICAgIC8vIFVzZXMgbW9uZ29vc2UtcGFnaW5hdGUgdG8gcGFnaW5hdGUgcmVzdWx0cy4gUGx1Z2luIGluIGltcG9ydGVkIGluIHRoZSBjb3Vyc2UubW9kZWwuanMuIFJlc3BvbnNlIHRvIGNsaWVudCBpcyBzZW50IGluIHRoaXMgZnVuY3Rpb24uIFxuICAgIC8vIFRha2VzIHRvIGFyZ3VtZW50cy4gT25lIGNvbnRlbnQgb2JqZWN0LCBhbmQgb25lIG9iamVjdCBjb250YWluaW5nIHBhZ2VzLCBwYWdlIGxpbWl0IGFuZCB3aGF0IHRvIHNvcnQgYnkuXG4gICAgLy8gVG8gZ28gdG8gbmV4dCBwYWdlIG9mIHF1ZXJ5IHJlc3VsdHMsIGFkZCAmcGFnZT08cGFnZV9udW1iZXI+IHRvIHRoZSBlbmQgb2YgdGhlIHF1ZXJ5LlxuICAgIC8vIFNvcnRzIGJ5IG5vcndlZ2lhbiBuYW1lIHVubGVzcyBzb3J0aW5nIGlzIHNwZWNpZmllZCBpbiB0aGUgcXVlcnkgaW4gYXNjZW5kaW5nIG9yZGVyIChvcmRlciA6IDEsIHVzZSAtMSBmb3IgZGVzY2VuZGluZykuXG4gICAgLy8gU29ydGluZyBhbmQgb3JkZXIgbWF5IGFsc28gYmUgYWRkZWQgdG8gdGhlIHF1ZXJ5ICZzb3J0aW5nPWNvdXJzZV9jb2RlJm9yZGVyPS0xLlxuICAgIEdyYWRlLnBhZ2luYXRlKGdyYWRlc1swXSx7XG4gICAgICAgIHBhZ2U6IHBhZ2VzLFxuICAgICAgICBsaW1pdDogbGltLFxuICAgICAgICBzb3J0OiB7W3NvcnRpbmddOltvcmRlcl1cbiAgICAgICAgfVxuICAgICAgfSkudGhlbihwYWdlID0+IHtcbiAgICAgICAgcmVzLmpzb24ocGFnZSk7XG4gICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbihlcnIpO1xuICAgICAgICB9KVxufSk7XG5cblxuLy8gTWFrZXMgaXQgcG9zc2libGUgdG8gZ28gZGlyZWN0bHkgdG8gdGhlIHNlbWVzdGVycyBvZiBhIGNvdXJzZSBvYmplY3QgYnkgdmlzaXRpbmcgaXQyODEwLTM5LmlkaS5udG51Lm5vOjMwMDEvZ3JhZGVzL1REVDQxMTAuXG4vLyBXaWxsIG9ubHkgcmV0dXJuIHNlbWVzdGVycyBmb3IgdGhpcyBzcGVjaWZpYyBjb3Vyc2UgY29kZS4gXG5ncmFkZVJvdXRlcy5yb3V0ZSgnLzpjb3Vyc2VfY29kZScpLmdldChhc3luYyBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgIGxldCBjb3Vyc2VfY29kZSA9IHJlcS5wYXJhbXMuY291cnNlX2NvZGU7XG4gICAgY29uc3QgZ3JhZGVzID0gYXdhaXQgR3JhZGUuZmluZCh7Y291cnNlX2NvZGUgOiBjb3Vyc2VfY29kZX0sIGZ1bmN0aW9uKGVyciwgZ3JhZGVzKSB7XG4gICAgICAgIHJlcy5qc29uKGdyYWRlcyk7XG4gICAgfSk7XG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oZ3JhZGVzKS5zZW5kKCk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgZ3JhZGVSb3V0ZXM7XG5cbi8vIEZvcm1hdCBmb3Igc3DDuHJyaW5nZXI6XG4vLyBodHRwOi8vbG9jYWxob3N0OjMwMDEvZ3JhZGVzP2NvdXJzZV9jb2RlPVREVDQxMTAmc2VtZXN0ZXJzLnNlbWVzdGVyX2NvZGU9SDIwMThcblxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "grades.js"
      ],
      "names": [
        "gradeRoutes",
        "express",
        "Router",
        "use",
        "req",
        "res",
        "next",
        "header",
        "route",
        "get",
        "sorting",
        "query",
        "order",
        "page",
        "pages",
        "parseInt",
        "limit",
        "lim",
        "content",
        "course_code",
        "baseUrl",
        "split",
        "grades",
        "Grade",
        "find",
        "paginate",
        "sort",
        "then",
        "json",
        "catch",
        "err",
        "status",
        "params",
        "send"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes",
      "sourcesContent": [
        "import Grade from '../models/grades.model'\nimport express from 'express';\nimport cors from 'cors';\n\nconst gradeRoutes = express.Router();\n\n// Cross-Origin Resource Sharing (CORS). Used to specify what type of requests is allowed, who may send requests and what header-types. \n// CORS works by adding new HTTP headers that let servers describe which origins are permitted to read information from a web browser.\ngradeRoutes.use(cors());\n  // Allow client to fetch data\n  gradeRoutes.use(function(req, res, next) {\n    res.header('Access-Control-Allow-Origin', '*'); // Can change * to allow request from specific clients\n    res.header('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n      res.header('Access-Control-Allow-Methods', 'GET, PUT'); // We only allow GET and PUT requests. \n      next();\n});\n\n// The function passed into the get function handles all GET requests sent to /grades \n// Further on, we're calling Grades.find to get a list of all course items from the MongoDB. The find function takes one argument, a callback function\n// which is executed once the result is available. All results available in courses are added in JSON format to the response by calling res.json(courses).\ngradeRoutes.route('/').get(async function(req, res) {\n    let sorting = req.query.sorting ? req.query.sorting: 'semester_code';\n    let order = req.query.order ? req.query.order : '1'; // Ascending order unless else is specified\n    let page = req.query.page ? req.query.page : 1;\n    let pages=parseInt(page);\n    let limit = req.query.limit ? req.query.limit : 10;\n    let lim=parseInt(limit);\n    \n    // Initiate an empty content object to save possible attributes for a grade document in the collection in content object\n    let content = {};\n    // Access course_code from URL by splitting on / and selecting the 3rd element. Will work for every possible state in this project.\n    content.course_code = req.baseUrl.split('/')[2]\n    // if (query.course_code) { content.course_code = {$regex : RegExp(query.course_code), $options:'-i'} }\n\n    \n    // The content object being send into find is of the form e.g., {course_code = \"TDT4140\"}\n    const grades = await Grade.find(content);\n\n    // Uses mongoose-paginate to paginate results. Plugin in imported in the course.model.js. Response to client is sent in this function. \n    // Takes to arguments. One content object, and one object containing pages, page limit and what to sort by.\n    // To go to next page of query results, add &page=<page_number> to the end of the query.\n    // Sorts by norwegian name unless sorting is specified in the query in ascending order (order : 1, use -1 for descending).\n    // Sorting and order may also be added to the query &sorting=course_code&order=-1.\n    Grade.paginate(grades[0],{\n        page: pages,\n        limit: lim,\n        sort: {[sorting]:[order]\n        }\n      }).then(page => {\n        res.json(page);\n      })\n        .catch(err => {\n          res.status(500).json(err);\n        })\n});\n\n\n// Makes it possible to go directly to the semesters of a course object by visiting it2810-39.idi.ntnu.no:3001/grades/TDT4110.\n// Will only return semesters for this specific course code. \ngradeRoutes.route('/:course_code').get(async function(req, res) {\n    let course_code = req.params.course_code;\n    const grades = await Grade.find({course_code : course_code}, function(err, grades) {\n        res.json(grades);\n    });\n    res.status(200).json(grades).send();\n});\n\nexport default gradeRoutes;\n\n// Format for sprringer:\n// http://localhost:3001/grades?course_code=TDT4110&semesters.semester_code=H2018\n\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1571743148124
  },
  "{\"sourceRoot\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/models\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend\",\"filename\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/models/grades.model.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend\",\"plugins\":[{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\"./src\"]}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"corejs2-usage\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null],\"exit\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"corejs\":{\"options\":{\"loose\":false,\"includePrerelease\":false},\"loose\":false,\"raw\":\"2.0.0\",\"major\":2,\"minor\":0,\"patch\":0,\"prerelease\":[],\"build\":[],\"version\":\"2.0.0\"},\"polyfillTargets\":{\"node\":\"10.15.3\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"regenerator\":false,\"debug\":false}}],\"presets\":[]}:7.6.4": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/models",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend",
      "filename": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/models/grades.model.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "./src"
            ]
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "corejs2-usage",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "Program": {
              "enter": [
                null
              ]
            },
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "YieldExpression": {
              "enter": [
                null
              ]
            },
            "MemberExpression": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "VariableDeclarator": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true,
            "Identifier": {
              "enter": [
                null
              ]
            },
            "JSXIdentifier": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "corejs": {
              "options": {
                "loose": false,
                "includePrerelease": false
              },
              "loose": false,
              "raw": "2.0.0",
              "major": 2,
              "minor": 0,
              "patch": 0,
              "prerelease": [],
              "build": [],
              "version": "2.0.0"
            },
            "polyfillTargets": {
              "node": "10.15.3"
            },
            "include": {},
            "exclude": {},
            "proposals": false,
            "shippedProposals": false,
            "regenerator": false,
            "debug": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/models/grades.model.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/models/grades.model.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/models",
        "sourceFileName": "grades.model.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _mongoosePaginate = _interopRequireDefault(require(\"mongoose-paginate\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// This file is a representation of the docs in the collection grades. \n// We have used Mongoose, which is a ODM (Object Data Modeling) library for MongoDB. \n// Mongoose manages relationships between data and translates between objects in code and the objects in MongoDB.\nconst Schema = _mongoose.default.Schema;\nlet Grade = new Schema({\n  course_code: {\n    type: String\n  },\n  semesters: {\n    type: Array\n  }\n}, {\n  collection: 'grades'\n}); // mongoose-paginate is used to paginate query results. Pagination is imported and activated in this file, but used in routes/grades.js\n\nGrade.plugin(_mongoosePaginate.default);\nmodule.exports = _mongoose.default.model('Grade', Grade);\nvar _default = Grade;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdyYWRlcy5tb2RlbC5qcyJdLCJuYW1lcyI6WyJTY2hlbWEiLCJtb25nb29zZSIsIkdyYWRlIiwiY291cnNlX2NvZGUiLCJ0eXBlIiwiU3RyaW5nIiwic2VtZXN0ZXJzIiwiQXJyYXkiLCJjb2xsZWN0aW9uIiwicGx1Z2luIiwibW9uZ29vc2VQYWdpbmF0ZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJtb2RlbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUE7QUFDQTtBQUNBO0FBRUEsTUFBTUEsTUFBTSxHQUFHQyxrQkFBU0QsTUFBeEI7QUFFQSxJQUFJRSxLQUFLLEdBQUcsSUFBSUYsTUFBSixDQUFXO0FBQ25CRyxFQUFBQSxXQUFXLEVBQUc7QUFDVkMsSUFBQUEsSUFBSSxFQUFFQztBQURJLEdBREs7QUFJbkJDLEVBQUFBLFNBQVMsRUFBRztBQUNSRixJQUFBQSxJQUFJLEVBQUVHO0FBREU7QUFKTyxDQUFYLEVBUVI7QUFBRUMsRUFBQUEsVUFBVSxFQUFHO0FBQWYsQ0FSUSxDQUFaLEMsQ0FXQTs7QUFDQU4sS0FBSyxDQUFDTyxNQUFOLENBQWFDLHlCQUFiO0FBRUFDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQlgsa0JBQVNZLEtBQVQsQ0FBZSxPQUFmLEVBQXdCWCxLQUF4QixDQUFqQjtlQUVlQSxLIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9WaWN0b3IvRG9jdW1lbnRzL05UTlUvSDIwMTkvV2VidXR2aWtsaW5nL3Byb3NqZWt0XzMvYmFja2VuZC9tb2RlbHMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5pbXBvcnQgbW9uZ29vc2VQYWdpbmF0ZSBmcm9tICdtb25nb29zZS1wYWdpbmF0ZSc7XG5cbi8vIFRoaXMgZmlsZSBpcyBhIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBkb2NzIGluIHRoZSBjb2xsZWN0aW9uIGdyYWRlcy4gXG4vLyBXZSBoYXZlIHVzZWQgTW9uZ29vc2UsIHdoaWNoIGlzIGEgT0RNIChPYmplY3QgRGF0YSBNb2RlbGluZykgbGlicmFyeSBmb3IgTW9uZ29EQi4gXG4vLyBNb25nb29zZSBtYW5hZ2VzIHJlbGF0aW9uc2hpcHMgYmV0d2VlbiBkYXRhIGFuZCB0cmFuc2xhdGVzIGJldHdlZW4gb2JqZWN0cyBpbiBjb2RlIGFuZCB0aGUgb2JqZWN0cyBpbiBNb25nb0RCLlxuXG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XG5cbmxldCBHcmFkZSA9IG5ldyBTY2hlbWEoe1xuICAgIGNvdXJzZV9jb2RlIDoge1xuICAgICAgICB0eXBlOiBTdHJpbmdcbiAgICB9LFxuICAgIHNlbWVzdGVycyA6IHtcbiAgICAgICAgdHlwZTogQXJyYXlcbiAgICB9fSxcblxuICAgIHsgY29sbGVjdGlvbiA6ICdncmFkZXMnIH1cbiAgICApXG5cbi8vIG1vbmdvb3NlLXBhZ2luYXRlIGlzIHVzZWQgdG8gcGFnaW5hdGUgcXVlcnkgcmVzdWx0cy4gUGFnaW5hdGlvbiBpcyBpbXBvcnRlZCBhbmQgYWN0aXZhdGVkIGluIHRoaXMgZmlsZSwgYnV0IHVzZWQgaW4gcm91dGVzL2dyYWRlcy5qc1xuR3JhZGUucGx1Z2luKG1vbmdvb3NlUGFnaW5hdGUpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG1vbmdvb3NlLm1vZGVsKCdHcmFkZScsIEdyYWRlKTtcblxuZXhwb3J0IGRlZmF1bHQgR3JhZGUiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "grades.model.js"
      ],
      "names": [
        "Schema",
        "mongoose",
        "Grade",
        "course_code",
        "type",
        "String",
        "semesters",
        "Array",
        "collection",
        "plugin",
        "mongoosePaginate",
        "module",
        "exports",
        "model"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA;AACA;AACA;AAEA,MAAMA,MAAM,GAAGC,kBAASD,MAAxB;AAEA,IAAIE,KAAK,GAAG,IAAIF,MAAJ,CAAW;AACnBG,EAAAA,WAAW,EAAG;AACVC,IAAAA,IAAI,EAAEC;AADI,GADK;AAInBC,EAAAA,SAAS,EAAG;AACRF,IAAAA,IAAI,EAAEG;AADE;AAJO,CAAX,EAQR;AAAEC,EAAAA,UAAU,EAAG;AAAf,CARQ,CAAZ,C,CAWA;;AACAN,KAAK,CAACO,MAAN,CAAaC,yBAAb;AAEAC,MAAM,CAACC,OAAP,GAAiBX,kBAASY,KAAT,CAAe,OAAf,EAAwBX,KAAxB,CAAjB;eAEeA,K",
      "sourceRoot": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/models",
      "sourcesContent": [
        "import mongoose from \"mongoose\";\nimport mongoosePaginate from 'mongoose-paginate';\n\n// This file is a representation of the docs in the collection grades. \n// We have used Mongoose, which is a ODM (Object Data Modeling) library for MongoDB. \n// Mongoose manages relationships between data and translates between objects in code and the objects in MongoDB.\n\nconst Schema = mongoose.Schema;\n\nlet Grade = new Schema({\n    course_code : {\n        type: String\n    },\n    semesters : {\n        type: Array\n    }},\n\n    { collection : 'grades' }\n    )\n\n// mongoose-paginate is used to paginate query results. Pagination is imported and activated in this file, but used in routes/grades.js\nGrade.plugin(mongoosePaginate);\n\nmodule.exports = mongoose.model('Grade', Grade);\n\nexport default Grade"
      ]
    },
    "sourceType": "script",
    "mtime": 1571743148116
  },
  "{\"sourceRoot\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend\",\"filename\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes/course.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend\",\"plugins\":[{\"key\":\"module-resolver\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"root\":[\"./src\"]}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":true}},{\"key\":\"corejs2-usage\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null],\"exit\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"corejs\":{\"options\":{\"loose\":false,\"includePrerelease\":false},\"loose\":false,\"raw\":\"2.0.0\",\"major\":2,\"minor\":0,\"patch\":0,\"prerelease\":[],\"build\":[],\"version\":\"2.0.0\"},\"polyfillTargets\":{\"node\":\"10.15.3\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"regenerator\":false,\"debug\":false}}],\"presets\":[]}:7.6.4": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend",
      "filename": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes/course.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "module-resolver",
          "visitor": {
            "Program": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "root": [
              "./src"
            ]
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": true
          }
        },
        {
          "key": "corejs2-usage",
          "visitor": {
            "ImportDeclaration": {
              "enter": [
                null
              ]
            },
            "Program": {
              "enter": [
                null
              ]
            },
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "YieldExpression": {
              "enter": [
                null
              ]
            },
            "MemberExpression": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "VariableDeclarator": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true,
            "Identifier": {
              "enter": [
                null
              ]
            },
            "JSXIdentifier": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "corejs": {
              "options": {
                "loose": false,
                "includePrerelease": false
              },
              "loose": false,
              "raw": "2.0.0",
              "major": 2,
              "minor": 0,
              "patch": 0,
              "prerelease": [],
              "build": [],
              "version": "2.0.0"
            },
            "polyfillTargets": {
              "node": "10.15.3"
            },
            "include": {},
            "exclude": {},
            "proposals": false,
            "shippedProposals": false,
            "regenerator": false,
            "debug": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes/course.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes/course.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes",
        "sourceFileName": "course.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _course = _interopRequireDefault(require(\"../models/course.model\"));\n\nvar _mongoose = require(\"mongoose\");\n\nvar _readline = require(\"readline\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// TODO: Add catch blocks for all functions to handle warnings in the console.\nconst courseRoutes = _express.default.Router(); // Cross-Origin Resource Sharing (CORS). Used to specify what type of requests is allowed, who may send requests and what header-types. \n// CORS works by adding new HTTP headers that let servers describe which origins are permitted to read information from a web browser.\n\n\ncourseRoutes.use((0, _cors.default)()); // Allow client to fetch data\n\ncourseRoutes.use(function (req, res, next) {\n  res.header('Access-Control-Allow-Origin', '*'); // Can change * to allow request from specific clients. In this project we dont care to handle security issues.\n\n  res.header('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n  res.header('Access-Control-Allow-Methods', 'GET, PUT'); // We only allow GET and PUT requests. On purpose, we decided to not have any functionality to add courses, neither delete them.\n\n  next();\n}); // The function passed into the get function handles all GET requests sent to it2810-39.idi.ntnu.no:<PORT-NUMBER>/courses \n// Further on, we're calling Course.find to get a list of all course items from the MongoDB. The find function takes one argument, a callback function\n// which is executed once the result is available. All results available in courses are added in JSON format to the response by calling res.json(courses).\n\ncourseRoutes.route('/').get(async function (req, res) {\n  // Saving all possible attributes for a course document in the collection in content object. \n  // Checks if attribute exists on req.query and saves it if it exists.\n  let content = {};\n  const query = await req.query;\n  var stringQuery = Object.keys(query)[0]; //This will be the input the user writes in the search bar\n  //Checks if there are any sort/filter specifications the query other than the key words\n\n  Object.keys(query).length > 1 ? (delete query[stringQuery], filtSort(query)) : searchOnly(stringQuery); //Makes query from user chosen filtering/sorting\n\n  function filtSort(query) {\n    if (query._id) {\n      content._id = query._id;\n    }\n\n    if (query.credits) {\n      content.credits = Number(query.credits);\n    }\n\n    if (query.taught_in_spring) {\n      content.taught_in_spring = true;\n    }\n\n    if (query.taught_in_autumn) {\n      content.taught_in_autumn = true;\n    }\n\n    if (query.content) {\n      content.content = {\n        $regex: RegExp(query.content),\n        $options: '-i'\n      };\n    }\n\n    if (query.learning_goal) {\n      content.learning_goal = {\n        $regex: RegExp(query.learning_goal),\n        $options: '-i'\n      };\n    } //Have to make the search as well, in addition to the sorting/filtering\n\n\n    searchOnly(stringQuery);\n  } //Only handles input from written in search bar in GUI. User only searches for norwegian_name or course_code\n\n\n  function searchOnly(stringQuery) {\n    if (allLetters(stringQuery)) {\n      containsCode(stringQuery) ? content.course_code = {\n        $regex: RegExp(stringQuery),\n        $options: '-i'\n      } : content.norwegian_name = {\n        $regex: RegExp(stringQuery),\n        $options: '-i'\n      };\n    } else if (containsNumber(stringQuery)) {\n      content.course_code = {\n        $regex: RegExp(stringQuery),\n        $options: '-i'\n      };\n    }\n  }\n\n  const courses = await _course.default.find(content, function (err, courses) {}).catch(err => console.log(err)); // Values retrieved by the query, else set to default values. Used in pagination and sorting of results.\n\n  let sorting = req.query.sorting ? req.query.sorting : 'norwegian_name';\n  let order = req.query.order ? req.query.order : '1';\n  let page = req.query.page ? req.query.page : 1;\n  let pages = parseInt(page);\n  let limit = req.query.limit ? req.query.limit : 10;\n  let lim = parseInt(limit); // console.log(content)\n  // Uses mongoose-paginate to paginate results. Plugin in imported in the course.model.js. Response to client is sent in this function. \n  // Takes to arguments. One content object, and one object containing pages, page limit and what to sort by.\n  // To go to next page of query results, add &page=<page_number> to the end of the query.\n  // Sorts by norwegian name unless sorting is specified in the query in ascending order (order : 1, use -1 for descending).\n  // Sorting and order may also be added to the query &sorting=course_code&order=-1.\n  // console.log(\"Content: \", content)\n\n  _course.default.paginate(content, {\n    page: pages,\n    limit: lim,\n    sort: {\n      [sorting]: [order]\n    }\n  }).then(paginated_content => {\n    // The content in json() is what is being returned in the HTTP Response. \n    // In this case paginated_content is the entire page containing all #page of objects\n    res.status(200).json(paginated_content);\n  }).catch(error => {\n    // In case of error, return status 500 and error message.\n    res.status(500).json(error);\n  });\n}); // This path endpoint is used to retrieve a course by its course_code. \n// This will return a single course object in JSON format as response to a GET request on course_code. \n// Course_code works as a key in the database (is unique for all documents in the collection)\n\ncourseRoutes.route('/:course_code').get(async (req, res) => {\n  let course_code = req.params.course_code;\n  course = await _course.default.find({\n    course_code: course_code\n  }, (err, course) => {\n    res.json(course);\n  }).catch(error => res.status(500).json(error));\n}); // For updating rows in collection with reviews and rated difficulty. PUT requests to it2810.39.idi.ntnu.no:3001/courses/<COURSE_CODE> will update the course \n// if the request contains a review AND a difficulty. \n\ncourseRoutes.put('/:course_code', (req, res) => {\n  // console.log(req.body.difficulty)\n  let difficulty = parseInt(req.body.difficulty);\n  let review = req.body.review; // Find the correct course in the DB. Course_code is a primary key, and the search will always return one result.\n\n  let course = _course.default.find({\n    course_code: req.params.course_code\n  });\n\n  console.log(\"review: \", review);\n\n  if (req.body.review && 6 > difficulty > 0) {\n    // console.log(req.params.course_code)\n    // Find document \"course\" in db and push the review to the review array on the document. Also update difficulty to new average.\n    _course.default.findOneAndUpdate(course, {\n      \"$push\": {\n        \"reviews\": review,\n        \"difficulty\": parseInt(req.body.difficulty)\n      }\n    }).then(res.json(\"Your review was successfully added!\")).catch(err => console.log(err));\n  }\n});\nvar _default = courseRoutes;\nexports.default = _default;\n\nfunction containsCode(query) {\n  let codes = \"tma tdt ttm it tfy\";\n  return codes.includes(query.toLowerCase());\n}\n\nfunction allLetters(query) {\n  let letters = /^[A-Za-z\\s]+$/;\n  return letters.test(query);\n}\n\nfunction containsNumber(query) {\n  let numbers = /\\d/;\n  return numbers.test(query);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvdXJzZS5qcyJdLCJuYW1lcyI6WyJjb3Vyc2VSb3V0ZXMiLCJleHByZXNzIiwiUm91dGVyIiwidXNlIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlciIsInJvdXRlIiwiZ2V0IiwiY29udGVudCIsInF1ZXJ5Iiwic3RyaW5nUXVlcnkiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwiZmlsdFNvcnQiLCJzZWFyY2hPbmx5IiwiX2lkIiwiY3JlZGl0cyIsIk51bWJlciIsInRhdWdodF9pbl9zcHJpbmciLCJ0YXVnaHRfaW5fYXV0dW1uIiwiJHJlZ2V4IiwiUmVnRXhwIiwiJG9wdGlvbnMiLCJsZWFybmluZ19nb2FsIiwiYWxsTGV0dGVycyIsImNvbnRhaW5zQ29kZSIsImNvdXJzZV9jb2RlIiwibm9yd2VnaWFuX25hbWUiLCJjb250YWluc051bWJlciIsImNvdXJzZXMiLCJDb3Vyc2UiLCJmaW5kIiwiZXJyIiwiY2F0Y2giLCJjb25zb2xlIiwibG9nIiwic29ydGluZyIsIm9yZGVyIiwicGFnZSIsInBhZ2VzIiwicGFyc2VJbnQiLCJsaW1pdCIsImxpbSIsInBhZ2luYXRlIiwic29ydCIsInRoZW4iLCJwYWdpbmF0ZWRfY29udGVudCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInBhcmFtcyIsImNvdXJzZSIsInB1dCIsImRpZmZpY3VsdHkiLCJib2R5IiwicmV2aWV3IiwiZmluZE9uZUFuZFVwZGF0ZSIsImNvZGVzIiwiaW5jbHVkZXMiLCJ0b0xvd2VyQ2FzZSIsImxldHRlcnMiLCJ0ZXN0IiwibnVtYmVycyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUE7QUFFQSxNQUFNQSxZQUFZLEdBQUdDLGlCQUFRQyxNQUFSLEVBQXJCLEMsQ0FFQTtBQUNBOzs7QUFDQUYsWUFBWSxDQUFDRyxHQUFiLENBQWlCLG9CQUFqQixFLENBQ0U7O0FBQ0FILFlBQVksQ0FBQ0csR0FBYixDQUFpQixVQUFTQyxHQUFU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YixDQUFQO0FBQ0Q7O0FBRUQsU0FBU29CLGNBQVQsQ0FBd0JwQixLQUF4QixFQUErQjtBQUM3QixNQUFJc0QsT0FBTyxHQUFHLElBQWQ7QUFDQSxTQUFPQSxPQUFPLENBQUNELElBQVIsQ0FBYXJELEtBQWIsQ0FBUDtBQUNEIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9WaWN0b3IvRG9jdW1lbnRzL05UTlUvSDIwMTkvV2VidXR2aWtsaW5nL3Byb3NqZWt0XzMvYmFja2VuZC9yb3V0ZXMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xuaW1wb3J0IENvdXJzZSBmcm9tICcuLi9tb2RlbHMvY291cnNlLm1vZGVsJztcbmltcG9ydCB7IG1vZGVsIH0gZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IHsgY2xlYXJTY3JlZW5Eb3duIH0gZnJvbSAncmVhZGxpbmUnO1xuXG4vLyBUT0RPOiBBZGQgY2F0Y2ggYmxvY2tzIGZvciBhbGwgZnVuY3Rpb25zIHRvIGhhbmRsZSB3YXJuaW5ncyBpbiB0aGUgY29uc29sZS5cblxuY29uc3QgY291cnNlUm91dGVzID0gZXhwcmVzcy5Sb3V0ZXIoKVxuXG4vLyBDcm9zcy1PcmlnaW4gUmVzb3VyY2UgU2hhcmluZyAoQ09SUykuIFVzZWQgdG8gc3BlY2lmeSB3aGF0IHR5cGUgb2YgcmVxdWVzdHMgaXMgYWxsb3dlZCwgd2hvIG1heSBzZW5kIHJlcXVlc3RzIGFuZCB3aGF0IGhlYWRlci10eXBlcy4gXG4vLyBDT1JTIHdvcmtzIGJ5IGFkZGluZyBuZXcgSFRUUCBoZWFkZXJzIHRoYXQgbGV0IHNlcnZlcnMgZGVzY3JpYmUgd2hpY2ggb3JpZ2lucyBhcmUgcGVybWl0dGVkIHRvIHJlYWQgaW5mb3JtYXRpb24gZnJvbSBhIHdlYiBicm93c2VyLlxuY291cnNlUm91dGVzLnVzZShjb3JzKCkpO1xuICAvLyBBbGxvdyBjbGllbnQgdG8gZmV0Y2ggZGF0YVxuICBjb3Vyc2VSb3V0ZXMudXNlKGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJyonKTsgLy8gQ2FuIGNoYW5nZSAqIHRvIGFsbG93IHJlcXVlc3QgZnJvbSBzcGVjaWZpYyBjbGllbnRzLiBJbiB0aGlzIHByb2plY3Qgd2UgZG9udCBjYXJlIHRvIGhhbmRsZSBzZWN1cml0eSBpc3N1ZXMuXG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsICdPcmlnaW4sIFgtUmVxdWVzdGVkLVdpdGgsIENvbnRlbnQtVHlwZSwgQWNjZXB0Jyk7XG4gICAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUFVUJyk7IC8vIFdlIG9ubHkgYWxsb3cgR0VUIGFuZCBQVVQgcmVxdWVzdHMuIE9uIHB1cnBvc2UsIHdlIGRlY2lkZWQgdG8gbm90IGhhdmUgYW55IGZ1bmN0aW9uYWxpdHkgdG8gYWRkIGNvdXJzZXMsIG5laXRoZXIgZGVsZXRlIHRoZW0uXG4gICAgICBuZXh0KCk7XG59KTtcblxuLy8gVGhlIGZ1bmN0aW9uIHBhc3NlZCBpbnRvIHRoZSBnZXQgZnVuY3Rpb24gaGFuZGxlcyBhbGwgR0VUIHJlcXVlc3RzIHNlbnQgdG8gaXQyODEwLTM5LmlkaS5udG51Lm5vOjxQT1JULU5VTUJFUj4vY291cnNlcyBcbi8vIEZ1cnRoZXIgb24sIHdlJ3JlIGNhbGxpbmcgQ291cnNlLmZpbmQgdG8gZ2V0IGEgbGlzdCBvZiBhbGwgY291cnNlIGl0ZW1zIGZyb20gdGhlIE1vbmdvREIuIFRoZSBmaW5kIGZ1bmN0aW9uIHRha2VzIG9uZSBhcmd1bWVudCwgYSBjYWxsYmFjayBmdW5jdGlvblxuLy8gd2hpY2ggaXMgZXhlY3V0ZWQgb25jZSB0aGUgcmVzdWx0IGlzIGF2YWlsYWJsZS4gQWxsIHJlc3VsdHMgYXZhaWxhYmxlIGluIGNvdXJzZXMgYXJlIGFkZGVkIGluIEpTT04gZm9ybWF0IHRvIHRoZSByZXNwb25zZSBieSBjYWxsaW5nIHJlcy5qc29uKGNvdXJzZXMpLlxuY291cnNlUm91dGVzLnJvdXRlKCcvJykuZ2V0KGFzeW5jIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gICAgXG5cbiAgICAvLyBTYXZpbmcgYWxsIHBvc3NpYmxlIGF0dHJpYnV0ZXMgZm9yIGEgY291cnNlIGRvY3VtZW50IGluIHRoZSBjb2xsZWN0aW9uIGluIGNvbnRlbnQgb2JqZWN0LiBcbiAgICAvLyBDaGVja3MgaWYgYXR0cmlidXRlIGV4aXN0cyBvbiByZXEucXVlcnkgYW5kIHNhdmVzIGl0IGlmIGl0IGV4aXN0cy5cbiAgICBsZXQgY29udGVudCA9IHt9O1xuICAgIGNvbnN0IHF1ZXJ5ID0gYXdhaXQgcmVxLnF1ZXJ5O1xuICAgIHZhciBzdHJpbmdRdWVyeSA9IE9iamVjdC5rZXlzKHF1ZXJ5KVswXSAvL1RoaXMgd2lsbCBiZSB0aGUgaW5wdXQgdGhlIHVzZXIgd3JpdGVzIGluIHRoZSBzZWFyY2ggYmFyXG5cbiAgICAvL0NoZWNrcyBpZiB0aGVyZSBhcmUgYW55IHNvcnQvZmlsdGVyIHNwZWNpZmljYXRpb25zIHRoZSBxdWVyeSBvdGhlciB0aGFuIHRoZSBrZXkgd29yZHNcbiAgICBPYmplY3Qua2V5cyhxdWVyeSkubGVuZ3RoID4gMSA/ICggZGVsZXRlIHF1ZXJ5W3N0cmluZ1F1ZXJ5XSwgZmlsdFNvcnQocXVlcnkpKSA6IHNlYXJjaE9ubHkoc3RyaW5nUXVlcnkpXG4gICBcbiAgXG4gICAgLy9NYWtlcyBxdWVyeSBmcm9tIHVzZXIgY2hvc2VuIGZpbHRlcmluZy9zb3J0aW5nXG4gICAgZnVuY3Rpb24gZmlsdFNvcnQocXVlcnkpIHtcblxuICAgICAgaWYgKHF1ZXJ5Ll9pZCkgeyBjb250ZW50Ll9pZCA9IHF1ZXJ5Ll9pZCB9IFxuICAgICAgaWYgKHF1ZXJ5LmNyZWRpdHMpIHsgY29udGVudC5jcmVkaXRzID0gTnVtYmVyKHF1ZXJ5LmNyZWRpdHMpfVxuICAgICAgaWYgKHF1ZXJ5LnRhdWdodF9pbl9zcHJpbmcpIHsgY29udGVudC50YXVnaHRfaW5fc3ByaW5nID0gdHJ1ZX0gXG4gICAgICBpZiAocXVlcnkudGF1Z2h0X2luX2F1dHVtbikgeyBjb250ZW50LnRhdWdodF9pbl9hdXR1bW4gPSB0cnVlfSBcbiAgICAgIGlmIChxdWVyeS5jb250ZW50KSB7IGNvbnRlbnQuY29udGVudCA9IHskcmVnZXg6IFJlZ0V4cChxdWVyeS5jb250ZW50KSwgJG9wdGlvbnM6Jy1pJ319XG4gICAgICBpZiAocXVlcnkubGVhcm5pbmdfZ29hbCkgeyBjb250ZW50LmxlYXJuaW5nX2dvYWwgPSB7JHJlZ2V4OiBSZWdFeHAocXVlcnkubGVhcm5pbmdfZ29hbCksICRvcHRpb25zOictaSd9fVxuXG4gICAgICAvL0hhdmUgdG8gbWFrZSB0aGUgc2VhcmNoIGFzIHdlbGwsIGluIGFkZGl0aW9uIHRvIHRoZSBzb3J0aW5nL2ZpbHRlcmluZ1xuICAgICAgc2VhcmNoT25seShzdHJpbmdRdWVyeSlcbiAgICB9XG4gIFxuICAgIC8vT25seSBoYW5kbGVzIGlucHV0IGZyb20gd3JpdHRlbiBpbiBzZWFyY2ggYmFyIGluIEdVSS4gVXNlciBvbmx5IHNlYXJjaGVzIGZvciBub3J3ZWdpYW5fbmFtZSBvciBjb3Vyc2VfY29kZVxuICAgIGZ1bmN0aW9uIHNlYXJjaE9ubHkoc3RyaW5nUXVlcnkpIHtcbiAgICAgIGlmKGFsbExldHRlcnMoc3RyaW5nUXVlcnkpKSB7XG4gICAgICAgIGNvbnRhaW5zQ29kZShzdHJpbmdRdWVyeSkgPyBjb250ZW50LmNvdXJzZV9jb2RlID0geyRyZWdleDogUmVnRXhwKHN0cmluZ1F1ZXJ5KSwgJG9wdGlvbnM6Jy1pJ30gOiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQubm9yd2VnaWFuX25hbWUgPSB7JHJlZ2V4IDogUmVnRXhwKHN0cmluZ1F1ZXJ5KSwgJG9wdGlvbnM6Jy1pJ31cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGNvbnRhaW5zTnVtYmVyKHN0cmluZ1F1ZXJ5KSkge1xuICAgICAgICBjb250ZW50LmNvdXJzZV9jb2RlID0geyRyZWdleDogUmVnRXhwKHN0cmluZ1F1ZXJ5KSwgJG9wdGlvbnM6Jy1pJ31cbiAgICAgIH1cbiAgICB9XG4gICAgXG5cbiAgICBjb25zdCBjb3Vyc2VzID0gYXdhaXQgQ291cnNlLmZpbmQoKGNvbnRlbnQpLCBmdW5jdGlvbihlcnIsIGNvdXJzZXMpIHt9KS5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gICAgXG4gICAgLy8gVmFsdWVzIHJldHJpZXZlZCBieSB0aGUgcXVlcnksIGVsc2Ugc2V0IHRvIGRlZmF1bHQgdmFsdWVzLiBVc2VkIGluIHBhZ2luYXRpb24gYW5kIHNvcnRpbmcgb2YgcmVzdWx0cy5cbiAgICBsZXQgc29ydGluZyA9IHJlcS5xdWVyeS5zb3J0aW5nID8gcmVxLnF1ZXJ5LnNvcnRpbmc6ICdub3J3ZWdpYW5fbmFtZSc7XG4gICAgbGV0IG9yZGVyID0gcmVxLnF1ZXJ5Lm9yZGVyID8gcmVxLnF1ZXJ5Lm9yZGVyIDogJzEnO1xuICAgIGxldCBwYWdlID0gcmVxLnF1ZXJ5LnBhZ2UgPyByZXEucXVlcnkucGFnZSA6IDE7XG4gICAgbGV0IHBhZ2VzPXBhcnNlSW50KHBhZ2UpO1xuICAgIGxldCBsaW1pdCA9IHJlcS5xdWVyeS5saW1pdCA/IHJlcS5xdWVyeS5saW1pdCA6IDEwO1xuICAgIGxldCBsaW09cGFyc2VJbnQobGltaXQpO1xuICAgIC8vIGNvbnNvbGUubG9nKGNvbnRlbnQpXG5cbiAgICAvLyBVc2VzIG1vbmdvb3NlLXBhZ2luYXRlIHRvIHBhZ2luYXRlIHJlc3VsdHMuIFBsdWdpbiBpbiBpbXBvcnRlZCBpbiB0aGUgY291cnNlLm1vZGVsLmpzLiBSZXNwb25zZSB0byBjbGllbnQgaXMgc2VudCBpbiB0aGlzIGZ1bmN0aW9uLiBcbiAgICAvLyBUYWtlcyB0byBhcmd1bWVudHMuIE9uZSBjb250ZW50IG9iamVjdCwgYW5kIG9uZSBvYmplY3QgY29udGFpbmluZyBwYWdlcywgcGFnZSBsaW1pdCBhbmQgd2hhdCB0byBzb3J0IGJ5LlxuICAgIC8vIFRvIGdvIHRvIG5leHQgcGFnZSBvZiBxdWVyeSByZXN1bHRzLCBhZGQgJnBhZ2U9PHBhZ2VfbnVtYmVyPiB0byB0aGUgZW5kIG9mIHRoZSBxdWVyeS5cbiAgICAvLyBTb3J0cyBieSBub3J3ZWdpYW4gbmFtZSB1bmxlc3Mgc29ydGluZyBpcyBzcGVjaWZpZWQgaW4gdGhlIHF1ZXJ5IGluIGFzY2VuZGluZyBvcmRlciAob3JkZXIgOiAxLCB1c2UgLTEgZm9yIGRlc2NlbmRpbmcpLlxuICAgIC8vIFNvcnRpbmcgYW5kIG9yZGVyIG1heSBhbHNvIGJlIGFkZGVkIHRvIHRoZSBxdWVyeSAmc29ydGluZz1jb3Vyc2VfY29kZSZvcmRlcj0tMS5cbiAgICAvLyBjb25zb2xlLmxvZyhcIkNvbnRlbnQ6IFwiLCBjb250ZW50KVxuICAgIENvdXJzZS5wYWdpbmF0ZShjb250ZW50LFxuICAgICAgICB7ICAgcGFnZTogcGFnZXMsXG4gICAgICAgICAgICBsaW1pdDogbGltLFxuICAgICAgICAgICAgc29ydDoge1tzb3J0aW5nXTpbb3JkZXJdfVxuICAgICAgICB9KVxuICAgICAgICAudGhlbihwYWdpbmF0ZWRfY29udGVudCA9PiB7XG4gICAgICAgICAgICAvLyBUaGUgY29udGVudCBpbiBqc29uKCkgaXMgd2hhdCBpcyBiZWluZyByZXR1cm5lZCBpbiB0aGUgSFRUUCBSZXNwb25zZS4gXG4gICAgICAgICAgICAvLyBJbiB0aGlzIGNhc2UgcGFnaW5hdGVkX2NvbnRlbnQgaXMgdGhlIGVudGlyZSBwYWdlIGNvbnRhaW5pbmcgYWxsICNwYWdlIG9mIG9iamVjdHNcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHBhZ2luYXRlZF9jb250ZW50KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgIC8vIEluIGNhc2Ugb2YgZXJyb3IsIHJldHVybiBzdGF0dXMgNTAwIGFuZCBlcnJvciBtZXNzYWdlLlxuICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKGVycm9yKTtcbiAgICAgICAgfSlcbn0pO1xuXG4vLyBUaGlzIHBhdGggZW5kcG9pbnQgaXMgdXNlZCB0byByZXRyaWV2ZSBhIGNvdXJzZSBieSBpdHMgY291cnNlX2NvZGUuIFxuLy8gVGhpcyB3aWxsIHJldHVybiBhIHNpbmdsZSBjb3Vyc2Ugb2JqZWN0IGluIEpTT04gZm9ybWF0IGFzIHJlc3BvbnNlIHRvIGEgR0VUIHJlcXVlc3Qgb24gY291cnNlX2NvZGUuIFxuLy8gQ291cnNlX2NvZGUgd29ya3MgYXMgYSBrZXkgaW4gdGhlIGRhdGFiYXNlIChpcyB1bmlxdWUgZm9yIGFsbCBkb2N1bWVudHMgaW4gdGhlIGNvbGxlY3Rpb24pXG5jb3Vyc2VSb3V0ZXMucm91dGUoJy86Y291cnNlX2NvZGUnKS5nZXQoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgbGV0IGNvdXJzZV9jb2RlID0gcmVxLnBhcmFtcy5jb3Vyc2VfY29kZTtcbiAgICBjb3Vyc2UgPSBhd2FpdCBDb3Vyc2UuZmluZCh7Y291cnNlX2NvZGUgOiBjb3Vyc2VfY29kZX0sIChlcnIsIGNvdXJzZSkgPT4ge1xuICAgICAgICByZXMuanNvbihjb3Vyc2UpO1xuICAgIH0pLmNhdGNoKGVycm9yID0+IHJlcy5zdGF0dXMoNTAwKS5qc29uKGVycm9yKSk7XG59KTtcblxuXG4vLyBGb3IgdXBkYXRpbmcgcm93cyBpbiBjb2xsZWN0aW9uIHdpdGggcmV2aWV3cyBhbmQgcmF0ZWQgZGlmZmljdWx0eS4gUFVUIHJlcXVlc3RzIHRvIGl0MjgxMC4zOS5pZGkubnRudS5ubzozMDAxL2NvdXJzZXMvPENPVVJTRV9DT0RFPiB3aWxsIHVwZGF0ZSB0aGUgY291cnNlIFxuLy8gaWYgdGhlIHJlcXVlc3QgY29udGFpbnMgYSByZXZpZXcgQU5EIGEgZGlmZmljdWx0eS4gXG5jb3Vyc2VSb3V0ZXMucHV0KCcvOmNvdXJzZV9jb2RlJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgLy8gY29uc29sZS5sb2cocmVxLmJvZHkuZGlmZmljdWx0eSlcbiAgICBsZXQgZGlmZmljdWx0eSA9IHBhcnNlSW50KHJlcS5ib2R5LmRpZmZpY3VsdHkpXG4gICAgbGV0IHJldmlldyA9IHJlcS5ib2R5LnJldmlld1xuICAgIC8vIEZpbmQgdGhlIGNvcnJlY3QgY291cnNlIGluIHRoZSBEQi4gQ291cnNlX2NvZGUgaXMgYSBwcmltYXJ5IGtleSwgYW5kIHRoZSBzZWFyY2ggd2lsbCBhbHdheXMgcmV0dXJuIG9uZSByZXN1bHQuXG4gICAgbGV0IGNvdXJzZSA9IENvdXJzZS5maW5kKHtjb3Vyc2VfY29kZSA6IHJlcS5wYXJhbXMuY291cnNlX2NvZGV9KVxuICAgIGNvbnNvbGUubG9nKFwicmV2aWV3OiBcIiwgcmV2aWV3KVxuICAgIGlmIChyZXEuYm9keS5yZXZpZXcgJiYgNj5kaWZmaWN1bHR5PjApIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2cocmVxLnBhcmFtcy5jb3Vyc2VfY29kZSlcbiAgICAgICAgLy8gRmluZCBkb2N1bWVudCBcImNvdXJzZVwiIGluIGRiIGFuZCBwdXNoIHRoZSByZXZpZXcgdG8gdGhlIHJldmlldyBhcnJheSBvbiB0aGUgZG9jdW1lbnQuIEFsc28gdXBkYXRlIGRpZmZpY3VsdHkgdG8gbmV3IGF2ZXJhZ2UuXG4gICAgICAgIENvdXJzZS5maW5kT25lQW5kVXBkYXRlKGNvdXJzZSwge1wiJHB1c2hcIiA6IHtcInJldmlld3NcIjogcmV2aWV3LCBcImRpZmZpY3VsdHlcIiA6IHBhcnNlSW50KHJlcS5ib2R5LmRpZmZpY3VsdHkpfX0pXG4gICAgICAgIC50aGVuKHJlcy5qc29uKFwiWW91ciByZXZpZXcgd2FzIHN1Y2Nlc3NmdWxseSBhZGRlZCFcIikpXG4gICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICAgIH0gIFxuICB9KTtcblxuXG5cblxuZXhwb3J0IGRlZmF1bHQgY291cnNlUm91dGVzO1xuXG5mdW5jdGlvbiBjb250YWluc0NvZGUocXVlcnkpIHtcbiAgbGV0IGNvZGVzID0gXCJ0bWEgdGR0IHR0bSBpdCB0ZnlcIlxuICByZXR1cm4gY29kZXMuaW5jbHVkZXMocXVlcnkudG9Mb3dlckNhc2UoKSlcbn1cblxuXG5mdW5jdGlvbiBhbGxMZXR0ZXJzKHF1ZXJ5KSB7XG4gIGxldCBsZXR0ZXJzID0gL15bQS1aYS16XFxzXSskL1xuICByZXR1cm4gbGV0dGVycy50ZXN0KHF1ZXJ5KVxufVxuXG5mdW5jdGlvbiBjb250YWluc051bWJlcihxdWVyeSkge1xuICBsZXQgbnVtYmVycyA9IC9cXGQvXG4gIHJldHVybiBudW1iZXJzLnRlc3QocXVlcnkpXG59Il19",
    "map": {
      "version": 3,
      "sources": [
        "course.js"
      ],
      "names": [
        "courseRoutes",
        "express",
        "Router",
        "use",
        "req",
        "res",
        "next",
        "header",
        "route",
        "get",
        "content",
        "query",
        "stringQuery",
        "Object",
        "keys",
        "length",
        "filtSort",
        "searchOnly",
        "_id",
        "credits",
        "Number",
        "taught_in_spring",
        "taught_in_autumn",
        "$regex",
        "RegExp",
        "$options",
        "learning_goal",
        "allLetters",
        "containsCode",
        "course_code",
        "norwegian_name",
        "containsNumber",
        "courses",
        "Course",
        "find",
        "err",
        "catch",
        "console",
        "log",
        "sorting",
        "order",
        "page",
        "pages",
        "parseInt",
        "limit",
        "lim",
        "paginate",
        "sort",
        "then",
        "paginated_content",
        "status",
        "json",
        "error",
        "params",
        "course",
        "put",
        "difficulty",
        "body",
        "review",
        "findOneAndUpdate",
        "codes",
        "includes",
        "toLowerCase",
        "letters",
        "test",
        "numbers"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/Victor/Documents/NTNU/H2019/Webutvikling/prosjekt_3/backend/routes",
      "sourcesContent": [
        "import express from 'express';\nimport cors from 'cors';\nimport Course from '../models/course.model';\nimport { model } from 'mongoose';\nimport { clearScreenDown } from 'readline';\n\n// TODO: Add catch blocks for all functions to handle warnings in the console.\n\nconst courseRoutes = express.Router()\n\n// Cross-Origin Resource Sharing (CORS). Used to specify what type of requests is allowed, who may send requests and what header-types. \n// CORS works by adding new HTTP headers that let servers describe which origins are permitted to read information from a web browser.\ncourseRoutes.use(cors());\n  // Allow client to fetch data\n  courseRoutes.use(function(req, res, next) {\n    res.header('Access-Control-Allow-Origin', '*'); // Can change * to allow request from specific clients. In this project we dont care to handle security issues.\n    res.header('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');\n      res.header('Access-Control-Allow-Methods', 'GET, PUT'); // We only allow GET and PUT requests. On purpose, we decided to not have any functionality to add courses, neither delete them.\n      next();\n});\n\n// The function passed into the get function handles all GET requests sent to it2810-39.idi.ntnu.no:<PORT-NUMBER>/courses \n// Further on, we're calling Course.find to get a list of all course items from the MongoDB. The find function takes one argument, a callback function\n// which is executed once the result is available. All results available in courses are added in JSON format to the response by calling res.json(courses).\ncourseRoutes.route('/').get(async function(req, res) {\n    \n\n    // Saving all possible attributes for a course document in the collection in content object. \n    // Checks if attribute exists on req.query and saves it if it exists.\n    let content = {};\n    const query = await req.query;\n    var stringQuery = Object.keys(query)[0] //This will be the input the user writes in the search bar\n\n    //Checks if there are any sort/filter specifications the query other than the key words\n    Object.keys(query).length > 1 ? ( delete query[stringQuery], filtSort(query)) : searchOnly(stringQuery)\n   \n  \n    //Makes query from user chosen filtering/sorting\n    function filtSort(query) {\n\n      if (query._id) { content._id = query._id } \n      if (query.credits) { content.credits = Number(query.credits)}\n      if (query.taught_in_spring) { content.taught_in_spring = true} \n      if (query.taught_in_autumn) { content.taught_in_autumn = true} \n      if (query.content) { content.content = {$regex: RegExp(query.content), $options:'-i'}}\n      if (query.learning_goal) { content.learning_goal = {$regex: RegExp(query.learning_goal), $options:'-i'}}\n\n      //Have to make the search as well, in addition to the sorting/filtering\n      searchOnly(stringQuery)\n    }\n  \n    //Only handles input from written in search bar in GUI. User only searches for norwegian_name or course_code\n    function searchOnly(stringQuery) {\n      if(allLetters(stringQuery)) {\n        containsCode(stringQuery) ? content.course_code = {$regex: RegExp(stringQuery), $options:'-i'} : \n                                    content.norwegian_name = {$regex : RegExp(stringQuery), $options:'-i'}\n      }\n      else if (containsNumber(stringQuery)) {\n        content.course_code = {$regex: RegExp(stringQuery), $options:'-i'}\n      }\n    }\n    \n\n    const courses = await Course.find((content), function(err, courses) {}).catch(err => console.log(err));\n    \n    // Values retrieved by the query, else set to default values. Used in pagination and sorting of results.\n    let sorting = req.query.sorting ? req.query.sorting: 'norwegian_name';\n    let order = req.query.order ? req.query.order : '1';\n    let page = req.query.page ? req.query.page : 1;\n    let pages=parseInt(page);\n    let limit = req.query.limit ? req.query.limit : 10;\n    let lim=parseInt(limit);\n    // console.log(content)\n\n    // Uses mongoose-paginate to paginate results. Plugin in imported in the course.model.js. Response to client is sent in this function. \n    // Takes to arguments. One content object, and one object containing pages, page limit and what to sort by.\n    // To go to next page of query results, add &page=<page_number> to the end of the query.\n    // Sorts by norwegian name unless sorting is specified in the query in ascending order (order : 1, use -1 for descending).\n    // Sorting and order may also be added to the query &sorting=course_code&order=-1.\n    // console.log(\"Content: \", content)\n    Course.paginate(content,\n        {   page: pages,\n            limit: lim,\n            sort: {[sorting]:[order]}\n        })\n        .then(paginated_content => {\n            // The content in json() is what is being returned in the HTTP Response. \n            // In this case paginated_content is the entire page containing all #page of objects\n            res.status(200).json(paginated_content);\n        })\n        .catch(error => {\n            // In case of error, return status 500 and error message.\n          res.status(500).json(error);\n        })\n});\n\n// This path endpoint is used to retrieve a course by its course_code. \n// This will return a single course object in JSON format as response to a GET request on course_code. \n// Course_code works as a key in the database (is unique for all documents in the collection)\ncourseRoutes.route('/:course_code').get(async (req, res) => {\n    let course_code = req.params.course_code;\n    course = await Course.find({course_code : course_code}, (err, course) => {\n        res.json(course);\n    }).catch(error => res.status(500).json(error));\n});\n\n\n// For updating rows in collection with reviews and rated difficulty. PUT requests to it2810.39.idi.ntnu.no:3001/courses/<COURSE_CODE> will update the course \n// if the request contains a review AND a difficulty. \ncourseRoutes.put('/:course_code', (req, res) => {\n    // console.log(req.body.difficulty)\n    let difficulty = parseInt(req.body.difficulty)\n    let review = req.body.review\n    // Find the correct course in the DB. Course_code is a primary key, and the search will always return one result.\n    let course = Course.find({course_code : req.params.course_code})\n    console.log(\"review: \", review)\n    if (req.body.review && 6>difficulty>0) {\n        // console.log(req.params.course_code)\n        // Find document \"course\" in db and push the review to the review array on the document. Also update difficulty to new average.\n        Course.findOneAndUpdate(course, {\"$push\" : {\"reviews\": review, \"difficulty\" : parseInt(req.body.difficulty)}})\n        .then(res.json(\"Your review was successfully added!\"))\n        .catch(err => console.log(err))\n      }  \n  });\n\n\n\n\nexport default courseRoutes;\n\nfunction containsCode(query) {\n  let codes = \"tma tdt ttm it tfy\"\n  return codes.includes(query.toLowerCase())\n}\n\n\nfunction allLetters(query) {\n  let letters = /^[A-Za-z\\s]+$/\n  return letters.test(query)\n}\n\nfunction containsNumber(query) {\n  let numbers = /\\d/\n  return numbers.test(query)\n}"
      ]
    },
    "sourceType": "script",
    "mtime": 1571753106166
  }
}